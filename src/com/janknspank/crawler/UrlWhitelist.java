package com.janknspank.crawler;

import java.net.MalformedURLException;
import java.net.URL;
import java.util.List;
import java.util.Map;
import java.util.regex.Pattern;

import com.google.common.base.Predicate;
import com.google.common.collect.Iterables;
import com.google.common.collect.Lists;
import com.google.common.collect.Maps;
import com.janknspank.bizness.Links;
import com.janknspank.common.Logger;
import com.janknspank.database.Database;
import com.janknspank.database.DatabaseSchemaException;
import com.janknspank.database.QueryOption;
import com.janknspank.proto.ArticleProto.Article;
import com.janknspank.proto.CoreProto.Url;
import com.janknspank.proto.CrawlProto.ContentSite;
import com.janknspank.proto.CrawlProto.ContentSite.PathBlacklist;
import com.janknspank.proto.CrawlProto.ContentSite.PathBlacklist.Location;
import com.janknspank.proto.CrawlProto.CrawlInstructions;
import com.janknspank.proto.CrawlProto.TestInstructions;
import com.janknspank.proto.CrawlProto.TestInstructions.ArticleUrlDetectorChecks;
import com.janknspank.proto.CrawlProto.TestInstructions.UrlWhitelistChecks;

public class UrlWhitelist {
  public static final Predicate<String> PREDICATE = new Predicate<String>() {
    @Override
    public boolean apply(String url) {
      return UrlWhitelist.isOkay(url);
    }
  };

  public static final CrawlInstructions CRAWL_INSTRUCTIONS = CrawlInstructions.newBuilder()
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("abc.net.au")
          .addStartUrl("http://www.abc.net.au/")
          .addSubdomainBlacklist("about.abc.net.au")
          .addSubdomainBlacklist("iview.abc.net.au")
          .addSubdomainBlacklist("mobile.abc.net.au")
          .addSubdomainBlacklist("mobile-phones.smh.com.au")
          .addSubdomainBlacklist("nucwed.aus.aunty.abc.net.au")
          .addSubdomainBlacklist("search.abc.net.au")
          .addSubdomainBlacklist("shop.abc.net.au")
          .addSubdomainBlacklist("www2b.abc.net.au")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/radio/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("\\/sport\\/.*\\/scoreboard\\/")
              .setLocation(Location.REGEX_FIND))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("\\/sport\\/.*\\/results\\/")
              .setLocation(Location.REGEX_FIND))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/image/")
              .setLocation(Location.CONTAINS))
          // DO NOT EXPAND THIS TO .article p, ALL USER COMMENTS GET PULLED!
          .addParagraphSelector(".article > p")
          // E.g. http://www.abc.net.au/health/features/stories/2015/02/12/4178721.htm
          .addParagraphSelector(".story > p")
          .addParagraphSelector("#story > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.abc.net.au/catalyst/stories/4002580.htm")
                  .addArticleUrl("http://www.abc.net.au/health/features/stories/2014/10/28/4116350.htm")
                  .addArticleUrl("http://www.abc.net.au/health/thepulse/stories/2015/01/28/4169022.htm")
                  .addArticleUrl("http://www.abc.net.au/news/2014-12-26/world-war-i-relatives-indigenous-soldiers-fight-for-recognition/5954752")
                  .addArticleUrl("http://www.abc.net.au/news/2015-02-13/pms-comments-could-still-prejudice-trial-says-legal-community/6090058")
                  .addArticleUrl("http://www.abc.net.au/science/articles/2015/02/12/4178774.htm")
                  .addNonArticleUrl("http://abc.net.au")
                  .addNonArticleUrl("http://abc.net.au/btn/")
                  .addNonArticleUrl("http://www.abc.net.au")
                  .addNonArticleUrl("http://www.abc.net.au/7.30/")
                  .addNonArticleUrl("http://www.abc.net.au/abc3/news/")
                  .addNonArticleUrl("http://www.abc.net.au/copyright.htm")
                  .addNonArticleUrl("http://www.abc.net.au/science/articles/2015/02/12/")
                  .addNonArticleUrl("http://www.abc.net.au/technology/techexplained/default.htm")
                  .addNonArticleUrl("http://www.abc.net.au/tv/connect/messageboards.htm"))
              .setUrlWhitelistChecks(UrlWhitelistChecks.newBuilder()
                  // Because it's an image.
                  .addBadUrl("http://www.abc.net.au/news/2015-01-08/image/6006554")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("abcnews.go.com")
          .addStartUrl("http://www.abcnews.go.com")
          .addSubdomainBlacklist("forums.abcnews.go.com")
          .addSubdomainBlacklist("ugv.abcnews.go.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/Site/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/meta/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/xmldata/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/photos/")
              .setLocation(Location.CONTAINS))
          .addParagraphSelector("#storyText p")
          .addParagraphSelector("#innerbody p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://abcnews.go.com/2020/20-2020-surprising-celebrity-infomercials/story?id=13623616")
                  .addArticleUrl("http://abcnews.go.com/2020/story?id=124078")
                  .addArticleUrl("http://abcnews.go.com/ABCNews/cheerleader-fights-back-critics-big-game-hunting/story?id=24398963")
                  .addArticleUrl("http://abcnews.go.com/ABC_Univision/ABC_Univision/trouble-paradise-us-brazil/story?id=20320361")
                  .addArticleUrl("http://abcnews.go.com/ABC_Univision/Entertainment/draco-rosa-livin-la-vida-loca-beating-cancer/story?id=18766491")
                  .addArticleUrl("http://abcnews.go.com/ABC_Univision/cuban-blogger-yoani-snchezs-visit-brazil-sparks-protests/story?id=18556994")
                  .addArticleUrl("http://abcnews.go.com/Blotter/60-seconds-video-shows-us-secret-snatch-operation/story?id=22449318")
                  .addArticleUrl("http://abcnews.go.com/Business/10-brands-changing-public-image/story?id=23160475")
                  .addArticleUrl("http://abcnews.go.com/Business/story?id=89092")
                  .addArticleUrl("http://abcnews.go.com/US/2014-fifa-world-cup-win-lose-draw-hows/story?id=24321155")
                  .addArticleUrl("http://abcnews.go.com/US/wireStory/suspected-honduran-drug-kingpins-extradited-us-27726946")
                  .addArticleUrl("http://abcnews.go.com/US/wireStory/top-news-2014-left-public-grasping-answers-27671210")
                  .addArticleUrl("http://abcnews.go.com/US/woman-shot-killed-year-walmart/story?id=27907997")
                  .addArticleUrl("http://abcnews.go.com/WN/DianeSawyer/diane-sawyers-biography/story?id=9380180")
                  .addArticleUrl("http://abcnews.go.com/Weird/wireStory/boy-sends-allowance-save-uab-football-27716105")
                  .addArticleUrl("http://abcnews.go.com/blogs/politics/2014/08/7-unmistakable-signs-the-2016-presidential-race-has-already-started/")
                  .addNonArticleUrl("http://abcnews.go.com")
                  .addNonArticleUrl("http://abcnews.go.com/2020")
                  .addNonArticleUrl("http://abcnews.go.com/author/")
                  .addNonArticleUrl("http://abcnews.go.com/author/andrew_springer")
                  .addNonArticleUrl("http://abcnews.go.com/business")
                  .addNonArticleUrl("http://abcnews.go.com/topics/")
                  .addNonArticleUrl("http://abcnews.go.com/topics/business/airlines/aer-lingus.htm")
                  .addNonArticleUrl("http://abcnews.go.com/topics/business/airlines/hawaiian-airlines.htm?mediatype=Image")
                  .addNonArticleUrl("http://abcnews.go.com/topics/business/airlines/hawaiian-airlines.htm?mediatype=Video")
                  .addNonArticleUrl("http://abcnews.go.com/topics/entertainment/music/justin-bieber.htm")
                  .addNonArticleUrl("http://abcnews.go.com/topics/news/angola.htm")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("advice.careerbuilder.com")
          .addStartUrl("http://advice.careerbuilder.com")
          .addParagraphSelector(".post-body > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://advice.careerbuilder.com/posts/3-things-to-know-about-the-december-2014-jobs-report")
                  .addArticleUrl("http://advice.careerbuilder.com/posts/use-company-technology-for-this-not-that")
                  .addArticleUrl("http://advice.careerbuilder.com/posts/which-tv-couple-defines-your-work-spouse-relationship")
                  .addArticleUrl("http://advice.careerbuilder.com/posts/email-signatures-whats-in-and-whats-out-in-2015")
                  .addArticleUrl("http://advice.careerbuilder.com/posts/tips-for-spotting-a-bad-boss-in-an-interview")
                  .addNonArticleUrl("http://advice.careerbuilder.com/")
                  .addNonArticleUrl("http://advice.careerbuilder.com/?categories=Bosses")
                  .addNonArticleUrl("http://advice.careerbuilder.com/?industries=27-0000")
                  .addNonArticleUrl("http://advice.careerbuilder.com/about")
                  .addNonArticleUrl("http://advice.careerbuilder.com/feed.rss")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("allthingsd.com")
          .addStartUrl("http://www.allthingsd.com")
          .addSubdomainBlacklist("interview.allthingsd.com")
          .addSubdomainBlacklist("photos.allthingsd.com")
          .addParagraphSelector(".article-body > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://allthingsd.com/20130325/yahoo-paid-30-million-in-cash-for-18-months-of-young-summly-entrepreneurs-time/")
                  .addArticleUrl("http://allthingsd.com/20131023/whymavericksisfree/")
                  .addArticleUrl("http://allthingsd.com/20070531/d5-youtube/")
                  .addArticleUrl("http://allthingsd.com/20131018/arik-2/")
                  .addArticleUrl("http://allthingsd.com/20131120/lytro-raises-40-million-to-keep-its-dream-of-changing-photography-in-focus/")
                  .addNonArticleUrl("http://allthingsd.com/author/walt/")
                  .addNonArticleUrl("http://allthingsd.com/author/walt/page/2/")
                  .addNonArticleUrl("http://allthingsd.com/conferences/d/d11/")
                  .addNonArticleUrl("http://allthingsd.com/page/2/?s=walt")
                  .addNonArticleUrl("http://allthingsd.com/tag/greylock-partners/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("america.aljazeera.com")
          .addStartUrl("http://america.aljazeera.com")
          .addParagraphSelector(".text > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://america.aljazeera.com/articles/2014/12/30/venezuela-russiaoil.html")
                  .addArticleUrl("http://america.aljazeera.com/articles/2015/1/1/airasia-weather-hampersblackboxsearchfirstfuneral.html")
                  .addArticleUrl("http://america.aljazeera.com/articles/2015/2/12/sc-bill-aims-to-prove-state-gun-friendly-through-nra-curriculum-in-schools.html")
                  .addArticleUrl("http://america.aljazeera.com/articles/2015/2/14/after-decades-of-war-goma-drc-is-open-for-business.html")
                  .addArticleUrl("http://america.aljazeera.com/articles/2014/2/18/john-teller-fromautorepairshoptothewinterolympics.html")
                  .addNonArticleUrl("http://america.aljazeera.com/watch.html")
                  .addNonArticleUrl("http://election2014.america.aljazeera.com/multimedia")
                  .addNonArticleUrl("http://america.aljazeera.com/tools/community-guidelines.html")
                  .addNonArticleUrl("http://america.aljazeera.com/watch/shows/techknow.html")
                  .addNonArticleUrl("http://america.aljazeera.com/topics/topic/categories/technology.html")
                  .addNonArticleUrl("http://america.aljazeera.com/topics/topic/event/sochi-2014.html")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("arstechnica.com")
          .addStartUrl("http://arstechnica.com")
          .addSubdomainBlacklist("demiurge.arstechnica.com")
          .addSubdomainBlacklist("episteme.arstechnica.com")
          .addSubdomainBlacklist("feeds.arstechnica.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/archive/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/articles/paedia/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/civis/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/cpu/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/etc/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/features/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/forum/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/guide/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/guides/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/mt-static/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/old/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/paedia/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/reviews/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/site/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/sponsored/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/subscriptions/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/tweak/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/wankerdesk/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/sendnews.php")
              .setLocation(Location.ENDS_WITH))
          .addParagraphSelector(".article-content p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://arstechnica.com/apple/2005/05/305/")
                  .addArticleUrl("http://arstechnica.com/apple/2005/09/nano/")
                  .addArticleUrl("http://arstechnica.com/apple/2007/04/apple-going-to-offer-itunes-subscription-service-concentrate-and-ask-again/")
                  .addArticleUrl("http://arstechnica.com/apple/2008/07/iphone3g-review/")
                  .addArticleUrl("http://arstechnica.com/apple/2014/09/apple-announces-iphone-6-iphone-6-plus/")
                  .addArticleUrl("http://arstechnica.com/business/2014/10/after-gamergate-tweet-adobe-distances-itself-from-gawker-bullying/")
                  .addArticleUrl("http://arstechnica.com/business/2015/01/more-comcast-customers-write-in-report-name-changes-of-whore-dummy/")
                  .addArticleUrl("http://arstechnica.com/cars/2014/12/california-dmv-will-miss-its-deadline-for-driverless-car-regulations/")
                  .addArticleUrl("http://arstechnica.com/gadgets/2003/03/soundcathode/")
                  .addArticleUrl("http://arstechnica.com/gadgets/2012/04/ars-reviews-adobe-lightroom-4/")
                  .addArticleUrl("http://arstechnica.com/gadgets/2015/01/microsoft-to-invest-in-cyanogen-hopes-to-take-android-away-from-google/")
                  .addArticleUrl("http://arstechnica.com/gaming/2015/01/a-virtual-day-with-750-pinball-and-arcade-games-no-quarters-needed/")
                  .addArticleUrl("http://arstechnica.com/information-technology/2012/09/adobes-continuing-revolution-pushes-the-cutting-edge-of-html5-development/")
                  .addArticleUrl("http://arstechnica.com/news.ars/post/20050427-4857.html")
                  .addArticleUrl("http://arstechnica.com/science/2015/01/have-a-scientific-problem-steal-an-answer-from-nature/")
                  .addArticleUrl("http://arstechnica.com/security/2014/04/vicious-heartbleed-bug-bites-millions-of-android-phones-other-devices/")
                  .addArticleUrl("http://arstechnica.com/tech-policy/2015/01/silk-road-trial-how-the-dread-pirate-roberts-embraced-violence/")
                  .addArticleUrl("http://arstechnica.com/telecom/news/2009/02/gop-strives-to-get-their-tech-on.ars")
                  .addArticleUrl("http://arstechnica.com/the-multiverse/2014/12/battle-of-the-five-armies-is-a-soulless-end-to-the-flawed-hobbit-trilogy/")
                  .addArticleUrl("http://arstechnica.com/uncategorized/2003/05/300-2/")
                  .addArticleUrl("http://arstechnica.com/uncategorized/2008/03/broadcasters-blast-fcc-localism-proposals/")
                  .addArticleUrl("http://www.arstechnica.com/news/posts/1080081775.html")
                  .addNonArticleUrl("http://arstechnica.com")
                  .addNonArticleUrl("http://arstechnica.com/2014-ars-childs-play-drive-official-sweepstakes-rules/")
                  .addNonArticleUrl("http://arstechnica.com/apple/")
                  .addNonArticleUrl("http://arstechnica.com/apple/2008/07/iphone3g-review/1/")
                  .addNonArticleUrl("http://arstechnica.com/author/andrew-webster/")
                  .addNonArticleUrl("http://arstechnica.com/contact-us/")
                  .addNonArticleUrl("http://arstechnica.com/gadgets/")
                  .addNonArticleUrl("http://arstechnica.com/gadgets/2008/09/guide-200809/2/")
                  .addNonArticleUrl("http://arstechnica.com/the-multiverse/")
                  .addNonArticleUrl("http://arstechnica.com/uncategorized/")
                  .addNonArticleUrl("http://www.arstechnica.com/site/user-agreement.ars")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("bbc.co.uk")
          .addAkaRootDomain("bbc.com")
          .addStartUrl("http://www.bbc.co.uk")
          .addStartUrl("http://www.bbc.com")
          .addSubdomainBlacklist("iplayerhelp.external.bbc.co.uk")
          .addSubdomainBlacklist("faq.external.bbc.co.uk")
          .addSubdomainBlacklist("newsvote.bbc.co.uk")
          .addSubdomainBlacklist("ssl.bbc.co.uk")
          .addSubdomainBlacklist("m.bbc.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/guides/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/iplayer/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/mundo/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/programmes/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/portuguese/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/sport/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/travel/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/webwise/"))
          .addParagraphSelector(".story-body > p")
          .addParagraphSelector(".map-body > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.bbc.co.uk/news/business-25754888")
                  .addArticleUrl("http://www.bbc.co.uk/newsbeat/30624897")
                  .addArticleUrl("http://www.bbc.com/capital/story/20130821-six-tales-of-top-level-nepotism")
                  .addArticleUrl("http://www.bbc.com/culture/story/20141223-the-10-best-books-of-2014")
                  .addArticleUrl("http://www.bbc.com/future/story/20140629-how-pickpockets-trick-your-mind")
                  .addArticleUrl("http://www.bbc.com/news/business-14897130")
                  .addArticleUrl("http://www.bbc.com/news/world-asia-30896028")
                  .addNonArticleUrl("http://news.bbc.co.uk/democracylive/hi/bbc_parliament/newsid_8762000/8762150.stm")
                  .addNonArticleUrl("http://www.bbc.co.uk/capital/tags/personal-finance")
                  .addNonArticleUrl("http://www.bbc.co.uk/guides/zttpn39")
                  .addNonArticleUrl("http://www.bbc.com/capital/tags/personal-finance")
                  // Because it's a 404 - articles don't end with forward-slashes.
                  .addNonArticleUrl("http://www.bbc.com/news/world-asia-30573040/"))
              .setUrlWhitelistChecks(UrlWhitelistChecks.newBuilder()
                  .addGoodUrl("http://www.bbc.com/news/world-asia-30573040")
                  .addGoodUrl("http://www.bbc.co.uk/news/10725415")
                  .addGoodUrl("http://bbc.co.uk/news/10725415")
                  .addGoodUrl("http://www.bbc.com/future/story/20140629-how-pickpockets-trick-your-mind")
                  .addGoodUrl("http://www.bbc.com/culture/story/20141223-the-10-best-books-of-2014")
                  .addGoodUrl("http://www.bbc.com/earth/story/20141210-astounding-microscope-images")
                  .addGoodUrl("http://www.bbc.com/capital/story/20141113-surprising-career-killing-habits")
                  .addGoodUrl("http://www.bbc.com/earth/story/20141117-why-seals-have-sex-with-penguins")
                  .addGoodUrl("http://www.bbc.com/autos/story/20141223-most-fascinating-green-car-of-2014-local-motors-strati")
                  .addGoodUrl("http://www.bbc.co.uk/capital/story/20141113-surprising-career-killing-habits")
                  .addGoodUrl("http://www.bbc.co.uk/earth/story/20141117-why-seals-have-sex-with-penguins")
                  .addGoodUrl("http://www.bbc.co.uk/autos/story/20141223-most-fascinating-green-car-of-2014-local-motors-strati")
                  .addGoodUrl("http://www.bbc.com/news/world-asia-30573040/")
                  .addBadUrl("http://www.bbc.co.uk/webwise/0/22717887")
                  .addBadUrl("http://newsvote.bbc.co.uk/go/news/int/story/services/-/email/news")
                  .addBadUrl("http://www.bbc.co.uk/iplayer/episode/b00wv8gy/horrible-histories-horrible-christmas")
                  .addBadUrl("http://www.bbc.co.uk/guides/zttpn39")
                  .addBadUrl("http://www.bbc.com/sport/0/30603067")
                  .addBadUrl("http://www.bbc.co.uk/iplayer/categories/comedy/highlights")
                  .addBadUrl("http://www.bbc.com/travel/slideshow/20141211-father-christmas-mediterranean-island-escape")
                  .addBadUrl("http://www.bbc.co.uk/programmes/articles/s790szKLSc1l3n9Fqwxl9F/6-musics-albums-of-the-year-2014")
                  .addBadUrl("http://www.bbc.co.uk/portuguese/noticias/2014/12/141226_brasileira_tailandia_tsunami_gerardo_rw")
                  .addBadUrl("http://www.bbc.co.uk/mundo/noticias/2014/12/141119_cosas_sorprendentes_finde2014_yv")
                  .addBadUrl("http://www.bbc.com/programmes/articles/s790szKLSc1l3n9Fqwxl9F/6-musics-albums-of-the-year-2014")
                  .addBadUrl("http://www.bbc.com/portuguese/noticias/2014/12/141226_brasileira_tailandia_tsunami_gerardo_rw")
                  .addBadUrl("http://www.bbc.com/mundo/noticias/2014/12/141119_cosas_sorprendentes_finde2014_yv")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("bdnews24.com")
          .addStartUrl("http://bdnews24.com")
          .addSubdomainBlacklist("ads.bdnews24.com")
          .addSubdomainBlacklist("bangla.bdnews24.com")
          .addSubdomainBlacklist("blog.bdnews24.com")
          .addSubdomainBlacklist("click.bdnews24.com")
          .addSubdomainBlacklist("hello.bdnews24.com")
          .addSubdomainBlacklist("revive.bdnews24.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/animals/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/cars-vehicles/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/electronics/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/fashion/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/food-agro/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/hobbies-leisure/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/household/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/jobs/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/media/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/media-en/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/mobile/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/property/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/services-bangladesh/"))
          .addParagraphSelector(".body > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://bdnews24.com/business/2015/02/10/saudi-arabia-enters-deal-to-hire-120000-bangladeshis-a-year-start-with-domestic-helps")
                  .addArticleUrl("http://bdnews24.com/campus/2015/02/15/bcl-factions-clash-at-chittagong-university")
                  .addArticleUrl("http://bdnews24.com/cricket/2015/02/14/mathews-blames-poor-bowling-fielding-for-loss")
                  .addArticleUrl("http://bdnews24.com/lifestyle/2015/02/13/your-name-may-win-you-a-date-online")
                  .addArticleUrl("http://bdnews24.com/politics/2015/02/14/leave-khaleda-zia-if-you-want-popularity-al-leader-hasan-mahmood-tells-bnp")
                  .addNonArticleUrl("http://bdnews24.com/aboutus/index/")
                  .addNonArticleUrl("http://bdnews24.com/bangladesh/")
                  .addNonArticleUrl("http://bdnews24.com/entertainment/")
                  .addNonArticleUrl("http://opinion.bdnews24.com/author/a-qayyum-khan/")
                  .addNonArticleUrl("http://opinion.bdnews24.com/category/democracy/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("bloomberg.com")
          .addStartUrl("http://www.bloomberg.com")
          .addSubdomainBlacklist("bdn-ak.bloomberg.com")
          .addSubdomainBlacklist("bdns.bloomberg.com")
          .addSubdomainBlacklist("connect.bloomberg.com")
          .addSubdomainBlacklist("m.bloomberg.com")
          .addSubdomainBlacklist("jobs.bloomberg.com")
          .addSubdomainBlacklist("jobsearch.bloomberg.com")
          .addSubdomainBlacklist("login.bloomberg.com")
          .addSubdomainBlacklist("media.bloomberg.com")
          .addSubdomainBlacklist("mobile.bloomberg.com")
          .addSubdomainBlacklist("open.bloomberg.com")
          .addSubdomainBlacklist("search.bloomberg.com")
          .addSubdomainBlacklist("search1.bloomberg.com")
          .addSubdomainBlacklist("service.bloomberg.com")
          .addSubdomainBlacklist("washpost.bloomberg.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/ad-section/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/apps/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/billionaires/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/graphics/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/infographics/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/news/print/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/podcasts/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/quote/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/slideshow/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/visual-data/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/_/slideshow/")
              .setLocation(Location.ENDS_WITH))
          // See "Lawsky Said to Probe Medley Hedge Fund ...".
          .addParagraphSelector(".article_body > p")
          // See "... Joins the NYPD Funeral Protest Backlash".
          .addParagraphSelector(".article-body > p")
          // Printable pages.
          .addParagraphSelector("#story_content > p")
          // See: "Inside RadioShackâ€™s Slow-Motion Collapse".
          .addParagraphSelector("[itemprop=\"articleBody\"] p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://editors.bloomberg.com/news/2013-03-18/republicans-foil-what-most-u-s-wants-with-gerrymandering.html")
                  .addArticleUrl("http://go.bloomberg.com/tech-blog/2012-02-27-the-decline-of-social-gaming-on-facebook-may-be-exaggerated/")
                  .addArticleUrl("http://www.bloomberg.com/bb/newsarchive/al3Z6pt5_TWY.html")
                  .addArticleUrl("http://www.bloomberg.com/dataview/2014-02-25/bubble-to-bust-to-recovery.html")
                  .addArticleUrl("http://www.bloomberg.com/news/2010-04-16/store-owners-seeking-premium-u-s-real-estate-wait-for-retailers-to-die-.html")
                  .addArticleUrl("http://www.bloomberg.com/news/2014-12-17/carmike-to-pull-the-interview-from-theaters-following-threats.html")
                  .addArticleUrl("http://www.bloomberg.com/now/2011-05-25/introducing-bloomberg-view-putting-the-world-in-focus/")
                  .addNonArticleUrl("http://bloomberg.com/careers")
                  .addNonArticleUrl("http://bloomberg.com/company")
                  .addNonArticleUrl("http://go.bloomberg.com/market-now/")
                  .addNonArticleUrl("http://go.bloomberg.com/tech-blog/2012/02/")
                  .addNonArticleUrl("http://go.bloomberg.com/tech-blog/networking-equipment/")
                  .addNonArticleUrl("http://topics.bloomberg.com/abu-dhabi/")
                  .addNonArticleUrl("http://www.bloomberg.com")
                  .addNonArticleUrl("http://www.bloomberg.com/about/management/beth/")
                  .addNonArticleUrl("http://www.bloomberg.com/bsustainable/")
                  .addNonArticleUrl("http://www.bloomberg.com/notices/privacy.html")
                  // Because of page 2.
                  .addNonArticleUrl("http://www.bloomberg.com/now/2010/07/page/2/?post_type=press_release")
                  .addNonArticleUrl("http://www.bloomberg.com/now/2010/08/?post_type=press_release")
                  .addNonArticleUrl("http://www.bloomberg.com/solutions/bloomberg_enterprise/bloomberg_vault/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("boston.com")
          .addStartUrl("http://www.boston.com")
          .addSubdomainBlacklist("blogcabin.boston.com")
          .addSubdomainBlacklist("calendar.boston.com")
          .addSubdomainBlacklist("circulars.boston.com")
          .addSubdomainBlacklist("finds.boston.com")
          .addSubdomainBlacklist("healthguide.boston.com")
          .addSubdomainBlacklist("listings.boston.com")
          .addSubdomainBlacklist("members.boston.com")
          .addSubdomainBlacklist("r.prdedit.boston.com")
          .addSubdomainBlacklist("realestate.boston.com")
          .addSubdomainBlacklist("search.boston.com")
          .addSubdomainBlacklist("scene.boston.com")
          .addSubdomainBlacklist("spiderbites.boston.com")
          .addSubdomainBlacklist("stats.boston.com")
          .addSubdomainBlacklist("syndication.boston.com")
          .addSubdomainBlacklist("tickets.boston.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/boston/action/rssfeed"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/cars/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/eom/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/help/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/news/traffic/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/radio"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/sports/blogs/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/quote")
              .setLocation(Location.ENDS_WITH))
          .addParagraphSelector("article > p")
          .addParagraphSelector(".content-text > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://boston.com/community/blogs/crime_punishment/2014/02/political_rift_over_coakleys_s.html")
                  .addArticleUrl("http://boston.com/news/local/massachusetts/2014/12/29/blackstone-mother-pleads-not-guilty-murder-infant-death-case/1pZ9tly1GUZ9w5Yl1tRpSP/story.html")
                  .addArticleUrl("http://boston.com/sports/touching_all_the_bases/2014/12/_playing_nine_innings_while.html")
                  .addArticleUrl("http://finance.boston.com/boston/news/read/20733509/zipcar_unveils_inaugural_future_metropolis_index_to_measure/")
                  .addArticleUrl("http://www.boston.com/2012/03/16/dating/nkfeF9xitUXoWteAwWX1QI/story.html")
                  .addArticleUrl("http://www.boston.com/ae/blogs/mediaremix/2014/03/oprah_teases_lindsay_lohans_re.html")
                  .addArticleUrl("http://www.boston.com/blogs/ae/restaurants/the-restaurant-hub/2014/05/boston-mexican-cantina-cinco-.html")
                  .addArticleUrl("http://www.boston.com/business/innovation/state-of-play/2014/03/inside_demiurge_albert_reed_ce.html")
                  .addArticleUrl("http://www.boston.com/jobs/news/2014/05/03/nomination-letters-amedisys-home-healthcare/9lKICo47FRLGHGIKR4kSJN/story.html")
                  .addArticleUrl("http://www.boston.com/lifestyle/relationships/blogs/blissfullyinspired/2014/02/so_who_got_engaged_on_valentin.html")
                  .addNonArticleUrl("http://finance.boston.com/boston/markets")
                  .addNonArticleUrl("http://www.boston.com")
                  .addNonArticleUrl("http://www.boston.com/ae/")
                  .addNonArticleUrl("http://www.boston.com/ae/blogs/mediaremix/")
                  .addNonArticleUrl("http://www.boston.com/blogs/ae/restaurants/the-restaurant-hub/")
                  .addNonArticleUrl("http://www.boston.com/lifestyle/relationships/blogs/blissfullyinspired/")
                  .addNonArticleUrl("http://boston.com/ae/fun/")
                  .addNonArticleUrl("http://boston.com/community/blogs/crime_punishment/")
                  .addNonArticleUrl("http://boston.com/weather/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("breitbart.com")
          .addStartUrl("http://www.breitbart.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/video/"))
          .addParagraphSelector("article > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.breitbart.com/Big-Hollywood/2014/12/03/investigation-lena-dunhams-republican-rapist-story-falls-apart-under-scrutiny")
                  .addArticleUrl("http://www.breitbart.com/Breitbart-TV/2014/12/10/Breitbarts-Nolte-Lena-Dunham-Letting-Barry-One-Twist-in-the-Wind-with-Rape-Allegation")
                  .addArticleUrl("http://www.breitbart.com/big-government/2014/12/28/anti-police-protesters-plan-to-disrupt-new-years-eve-celebrations/")
                  .addArticleUrl("http://www.breitbart.com/big-hollywood/2015/02/13/domestic-abuse-activists-protest-london-fifty-shades-premiere/")
                  .addArticleUrl("http://www.breitbart.com/news/hundreds-protest-police-shooting-in-washington-state/")
                  .addArticleUrl("http://www.breitbart.com/news/players-celebs-and-models-converge-during-all-star-weekend/")
                  .addNonArticleUrl("http://www.breitbart.com/about-us/jobs/")
                  .addNonArticleUrl("http://www.breitbart.com/author/ildefonso-ortiz/")
                  .addNonArticleUrl("http://www.breitbart.com/california/")
                  .addNonArticleUrl("http://www.breitbart.com/news/topic/science-tech/")
                  .addNonArticleUrl("http://www.breitbart.com/newsletter-signup/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("buffalonews.com")
          .addStartUrl("http://www.buffalonews.com")
          .addSubdomainBlacklist("cars.buffalonews.com")
          .addSubdomainBlacklist("corp.buffalonews.com")
          .addSubdomainBlacklist("galleries.buffalonews.com")
          .addSubdomainBlacklist("realestate.buffalonews.com")
          .addSubdomainBlacklist("services.buffalonews.com")
          .addSubdomainBlacklist("shopping.buffalonews.com")
          .addSubdomainBlacklist("subscribe.buffalonews.com")
          .addParagraphSelector(".articleP p")
          .addParagraphSelector(".entry-content p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.buffalonews.com/apps/pbcs.dll/article?aid=/20130122/cityandregion/130129744/1010")
                  .addArticleUrl("http://www.buffalonews.com/article/20141124/CITYANDREGION/141129410")
                  .addArticleUrl("http://www.buffalonews.com/business/sp-500-erases-monthly-loss-on-biggest-3-day-rally-since-2011-20141219")
                  .addArticleUrl("http://www.buffalonews.com/city-region/town-of-niagara-shooting-suspect-treated-for-injuries-20150101")
                  .addArticleUrl("http://www.buffalonews.com/city-region/cold-tightens-grip-on-region-as-valentines-day-storm-kills-2-20150214")
                  .addArticleUrl("http://www.buffalonews.com/life-arts/travel/what-travelers-need-to-know-about-measles-20150215")
                  .addNonArticleUrl("http://www.buffalonews.com/help/terms-and-conditions")
                  .addNonArticleUrl("http://www.buffalonews.com/help/faq")
                  .addNonArticleUrl("http://www.buffalonews.com/life-arts")
                  .addNonArticleUrl("http://www.buffalonews.com/life-arts/travel")
                  .addNonArticleUrl("http://www.buffalonews.com/section/sitemap")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("businessinsider.com")
          .addStartUrl("http://www.businessinsider.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/best-colleges-in-the-us-"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/intelligence/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/register")
              .setLocation(Location.EQUALS))
          .addParagraphSelector(".post-content p")
          .addParagraphSelector(".intro-content p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://uk.businessinsider.com/heres-who-backs-putin-in-europe--and-why-2015-2")
                  .addArticleUrl("http://www.businessinsider.com/danish-police-several-injured-after-shooting-at-copenhagen-synagogue-2015-2")
                  .addArticleUrl("http://www.businessinsider.com/satya-nadella-totally-changed-microsoft-2015-2")
                  .addArticleUrl("http://www.businessinsider.com/scott-adams-on-goals-and-passion-2015-2")
                  .addArticleUrl("http://www.businessinsider.com/taiwan-navy-stealth-missile-warship-corvette-2014-12")
                  .addNonArticleUrl("http://uk.businessinsider.com/author/lianna-brinded")
                  .addNonArticleUrl("http://www.businessinsider.com/about/mobile")
                  .addNonArticleUrl("http://www.businessinsider.com/category/business-insider-mobile")
                  .addNonArticleUrl("http://www.businessinsider.com/clusterstock")
                  .addNonArticleUrl("http://www.businessinsider.com/sportspage"))
              .setUrlWhitelistChecks(UrlWhitelistChecks.newBuilder()
                  .addGoodUrl("http://uk.businessinsider.com/author/lianna-brinded")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("cbc.ca")
          .addStartUrl("http://www.cbc.ca")
          .addSubdomainBlacklist("music.cbc.ca")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/connects/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/mediacentre/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/player/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/shop/"))
          .addParagraphSelector(".story-content p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.cbc.ca/m/news/canada/british-columbia/b-c-premier-christy-clark-defends-site-c-as-a-100-year-plan-1.2883064")
                  .addArticleUrl("http://www.cbc.ca/news/business/biggest-marketing-fails-of-2014-apple-coors-and-more-1.2877875")
                  .addArticleUrl("http://www.cbc.ca/news/world/black-ivory-coffee-canadian-s-elephant-poop-coffee-makes-a-pricey-cup-of-joe-1.2881812")
                  .addArticleUrl("http://www.cbc.ca/newsblogs/yourcommunity/2014/04/rob-ford-crackathon-video-game-lights-up-the-web.html")
                  .addArticleUrl("http://www.cbc.ca/news/business/canadian-pacific-railway-talks-fail-engineers-go-on-strike-1.2958056")
                  .addNonArticleUrl("http://archives.cbc.ca")
                  .addNonArticleUrl("http://www.cbc.ca")
                  .addNonArticleUrl("http://www.cbc.ca/aboutcbc/discover/privacy.html")
                  .addNonArticleUrl("http://www.cbc.ca/newsblogs/politics/inside-politics-blog/author/kady-omalley/")
                  .addNonArticleUrl("http://www.cbc.ca/services/consumer_recordings.html")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("cbsnews.com")
          .addStartUrl("http://www.cbsnews.com")
          .addSubdomainBlacklist("cbsn.cbsnews.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/cbsnews./quote"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/media/"))
          .addParagraphSelector(".news-story p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://markets.cbsnews.com/AP-GfK-Poll-Americans-support-menu-labeling/017c0215bce7d92e/")
                  .addArticleUrl("http://markets.cbsnews.com/Google-confirms-it-sold-barge-docked-in-Maine/39e802b6c46600b2/99589142/")
                  .addArticleUrl("http://markets.cbsnews.com/Googles-pivotal-IPO-launched-a-decade-of-big-bets/43b914344536deee/3306396/")
                  .addArticleUrl("http://www.cbsnews.com/8301-204_162-57557287/french-scientists-warn-sperm-counts-falling-for-men/")
                  .addArticleUrl("http://www.cbsnews.com/8301-3460_162-57454827/face-the-nation-transcripts-june-17-2012-gov-romney-senator-graham-gov-dean/?morningSubCatAsset&tag=showDoorSubcatGrid")
                  .addArticleUrl("http://www.cbsnews.com/news/fbi-still-believes-north-korea-is-responsible-for-sony-hack/")
                  .addArticleUrl("http://www.cbsnews.com/stories/2002/11/21/health/main530238.shtml")
                  .addNonArticleUrl("http://markets.cbsnews.com/I:DJI/quote-324977/")
                  .addNonArticleUrl("http://www.cbsnews.com/")
                  .addNonArticleUrl("http://www.cbsnews.com/entertainment/")
                  .addNonArticleUrl("http://www.cbsnews.com/media/top-health-stories-of-2014/")
                  .addNonArticleUrl("http://www.cbsnews.com/team/steve-kroft/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("channelnewsasia.com")
          .addStartUrl("http://www.channelnewsasia.com")
          .addStartUrl("http://www1.channelnewsasia.com/premier/")
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/wp-admin/")
              .setLocation(Location.CONTAINS))
          .addParagraphSelector(".news_detail p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.channelnewsasia.com/news/asiapacific/search-for-qz8501-at/1557408.html")
                  .addArticleUrl("http://www.channelnewsasia.com/news/asiapacific/three-more-bodies-found/1559694.html")
                  .addArticleUrl("http://www.channelnewsasia.com/news/entertainment/local-celebs-show-support/1554884.html")
                  .addArticleUrl("http://www.channelnewsasia.com/news/world/one-dead-after-shootout/1659484.html")
                  .addArticleUrl("http://www1.channelnewsasia.com/premier/2014/09/01/an-institution-on-the-luxury-retail-scene-balbina-wong-talks-shop/")
                  .addArticleUrl("http://www1.channelnewsasia.com/premier/2014/12/26/swarovski-milner-endangered_species_portraits_mosaic/")
                  .addArticleUrl("http://www1.channelnewsasia.com/premier/2015/01/23/perfect-teas-for-dining/")
                  .addNonArticleUrl("http://futureforward.channelnewsasia.com")
                  .addNonArticleUrl("http://startup.channelnewsasia.com/meet-the-judges")
                  .addNonArticleUrl("http://www.channelnewsasia.com")
                  .addNonArticleUrl("http://www.channelnewsasia.com/changinglives")
                  .addNonArticleUrl("http://www.channelnewsasia.com/news/about/terms")
                  .addNonArticleUrl("http://www1.channelnewsasia.com/premier/wp-admin/admin-ajax.php?action=wml_load_posts&shortcodeId=1")
                  .addNonArticleUrl("http://www1.channelnewsasia.com/regionalevents/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("chicagotribune.com")
          .addStartUrl("http://www.chicagotribune.com")
          .addSubdomainBlacklist("advertising.chicagotribune.com")
          .addSubdomainBlacklist("apps.chicagotribune.com")
          .addSubdomainBlacklist("classified.chicagotribune.com")
          .addSubdomainBlacklist("members.chicagotribune.com")
          .addSubdomainBlacklist("myaccount2.chicagotribune.com")
          .addSubdomainBlacklist("placeanad.chicagotribune.com")
          .addSubdomainBlacklist("store.chicagotribune.com")
          .addParagraphSelector("article > p")
          .addParagraphSelector("article > div > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://articles.chicagotribune.com/2013-06-13/features/ct-tribu-social-media-google-plus-new-20130613_1_google-plus-social-media-platform")
                  .addArticleUrl("http://www.chicagotribune.com/entertainment/la-me-ln-bar-bans-google-glass-wearers-20140304-story.html")
                  .addArticleUrl("http://www.chicagotribune.com/news/columnists/kass/chi-jrw-race-card-kass-20150213-column.html")
                  .addArticleUrl("http://www.chicagotribune.com/news/local/breaking/chi-chicago-shootings-violence-20150214-story.html")
                  .addArticleUrl("http://www.chicagotribune.com/news/local/politics/chi-rauner-dealt-blow-in-bid-to-stop-union-fair-share-fees-20150213-story.html")
                  .addArticleUrl("http://www.chicagotribune.com/news/nationworld/chi-friday-the-13th-20150212-story.html")
                  .addNonArticleUrl("http://www.chicagotribune.com/about/chi-newspaperemail-htmlstory.html")
                  .addNonArticleUrl("http://www.chicagotribune.com/bluesky/about/chi-advertise-with-blue-sky-ngux-story.html")
                  .addNonArticleUrl("http://www.chicagotribune.com/brandpublishing/chase/")
                  .addNonArticleUrl("http://www.chicagotribune.com/business/chinews-gregory-karp-20130507-staff.html")
                  .addNonArticleUrl("http://www.chicagotribune.com/news/columnists/all/")
                  .addNonArticleUrl("http://www.chicagotribune.com/suburbs/burr-ridge/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("chron.com")
          .addStartUrl("http://www.chron.com")
          .addSubdomainBlacklist("cars.chron.com")
          .addSubdomainBlacklist("fangear.chron.com")
          .addSubdomainBlacklist("findnsave.chron.com")
          .addSubdomainBlacklist("local.chron.com")
          .addSubdomainBlacklist("reg.chron.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/cie/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/homes/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/jobs/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/feed")
              .setLocation(Location.ENDS_WITH))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/merge/"))
          .addParagraphSelector(".article-body p")
          .addParagraphSelector(".entry p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://blog.chron.com/onthemove/2014/12/advice-for-property-listings-and-relocation/")
                  .addArticleUrl("http://blog.chron.com/sciguy/2014/12/an-engineer-who-recovered-eight-apollo-capsules-from-the-pacific-tells-of-fishing-orion-from-the-sea/")
                  .addArticleUrl("http://blog.chron.com/texaspolitics/2015/02/cruz-video-mocks-obama-on-internet-regulation/")
                  .addArticleUrl("http://www.chron.com/disp/story.mpl/ap/world/5928101.html")
                  .addArticleUrl("http://www.chron.com/life/home/design/article/Fulshear-home-is-Texas-country-style-with-modern-5973903.php")
                  .addArticleUrl("http://www.chron.com/news/local/article/Breastaurant-CEO-offers-breast-implants-after-5985419.php")
                  .addArticleUrl("http://www.chron.com/news/texas/article/Rick-Perry-Jobs-juggernaut-meets-Governor-Oops-5985481.php")
                  .addArticleUrl("http://www.chron.com/business/article/Houston-skyscraper-quiz-How-well-do-you-know-6077510.php")
                  .addNonArticleUrl("http://blog.chron.com/k12zone/")
                  .addNonArticleUrl("http://blog.chron.com/k12zone/author/jenniferradcliffe/")
                  .addNonArticleUrl("http://blog.chron.com/techblog/")
                  .addNonArticleUrl("http://www.chron.com/neighborhood/kingwood/")
                  .addNonArticleUrl("http://www.chron.com/neighborhood/kingwood/news/")
                  .addNonArticleUrl("http://www.chron.com/about/mediagroup/executives/")
                  .addNonArticleUrl("http://www.chron.com/about/newsroom/"))
              .setUrlWhitelistChecks(UrlWhitelistChecks.newBuilder()
                  .addGoodUrl("http://blog.chron.com/techblog/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("cleveland.com")
          .addStartUrl("http://www.cleveland.com")
          .addSubdomainBlacklist("autos.cleveland.com")
          .addSubdomainBlacklist("blog.cleveland.com")
          .addSubdomainBlacklist("businessfinder.cleveland.com")
          .addSubdomainBlacklist("connect.cleveland.com")
          .addSubdomainBlacklist("findnsave.cleveland.com")
          .addSubdomainBlacklist("mobilejobs.cleveland.com")
          .addSubdomainBlacklist("mobileobits.cleveland.com")
          .addSubdomainBlacklist("photos.cleveland.com")
          .addSubdomainBlacklist("realestate.cleveland.com")
          .addSubdomainBlacklist("cinesport.cleveland.com")
          .addSubdomainBlacklist("classifieds.cleveland.com")
          .addSubdomainBlacklist("foreclosures.cleveland.com")
          .addSubdomainBlacklist("highschoolsports.cleveland.com")
          .addSubdomainBlacklist("jobs.cleveland.com")
          .addSubdomainBlacklist("m.cleveland.com")
          .addSubdomainBlacklist("search.cleveland.com")
          .addSubdomainBlacklist("signup.cleveland.com")
          .addSubdomainBlacklist("stats.cleveland.com")
          .addSubdomainBlacklist("update.cleveland.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/events/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/events")
              .setLocation(Location.EQUALS))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/forums/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/forums")
              .setLocation(Location.EQUALS))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/jobs/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/jobs")
              .setLocation(Location.EQUALS))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/print.html")
              .setLocation(Location.ENDS_WITH))
          .addParagraphSelector(".entry-content p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.cleveland.com/business/index.ssf/2014/12/marc_krantz_managing_partner_o.html")
                  .addArticleUrl("http://www.cleveland.com/nation/index.ssf/2015/01/ohio_judge_tells_shoplifting_mom.html")
                  .addArticleUrl("http://www.cleveland.com/sunnews/index.ssf/2012/09/read_your_news_from_your_commu.html")
                  .addArticleUrl("http://www.cleveland.com/travel/index.ssf/2014/12/alpine_valley_opens_today_at_5.html")
                  .addArticleUrl("http://www.cleveland.com/weather/blog/index.ssf/2015/02/dangerously_low_wind_chill_tem.html#incart_m-rpt-1")
                  .addNonArticleUrl("http://connect.cleveland.com/user/jpiorkow/posts.html")
                  .addNonArticleUrl("http://topics.cleveland.com/tag/fashion%20flash/index.html")
                  .addNonArticleUrl("http://www.cleveland.com/aboutus/")
                  .addNonArticleUrl("http://www.cleveland.com/business/index.ssf/technology")
                  .addNonArticleUrl("http://www.cleveland.com/religion/index.ssf/faith_on_the_fly/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("cnbc.com")
          .addStartUrl("http://www.cnbc.com")
          .addSubdomainBlacklist("data.cnbc.com")
          .addSubdomainBlacklist("futuresnow.cnbc.com")
          .addSubdomainBlacklist("portfolio.cnbc.com")
          .addSubdomainBlacklist("pro.cnbc.com")
          .addSubdomainBlacklist("watchlist.cnbc.com")
          .addSubdomainBlacklist("videoreprints.cnbc.com")
          .addSubdomainBlacklist("webcast.cnbc.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/live-tv/"))
          .addParagraphSelector("#article_body p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.cnbc.com/id/102301617")
                  .addArticleUrl("http://www.cnbc.com/id/102301834/")
                  .addArticleUrl("http://www.cnbc.com/id/102301896/asgasgag")
                  .addArticleUrl("http://www.cnbc.com/id/102427047")
                  .addArticleUrl("http://www.cnbc.com/id/102409378")
                  .addNonArticleUrl("http://www.cnbc.com/")
                  .addNonArticleUrl("http://www.cnbc.com/account")
                  .addNonArticleUrl("http://www.cnbc.com/halftime")
                  .addNonArticleUrl("http://www.cnbc.com/id/10000066")
                  .addNonArticleUrl("http://www.cnbc.com/id/17689937")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("cnn.com")
          .addStartUrl("http://www.cnn.com")
          .addSubdomainBlacklist("arabic.cnn.com")
          .addSubdomainBlacklist("audience.cnn.com")
          .addSubdomainBlacklist("blogs.cnn.com")
          .addSubdomainBlacklist("cnnespanol.cnn.com")
          .addSubdomainBlacklist("games.cnn.com")
          .addSubdomainBlacklist("inhealth.cnn.com")
          .addSubdomainBlacklist("ireport.cnn.com")
          .addSubdomainBlacklist("mexico.cnn.com")
          .addSubdomainBlacklist("partners.cnn.com")
          .addSubdomainBlacklist("rss.cnn.com")
          .addSubdomainBlacklist("search.cnn.com")
          .addSubdomainBlacklist("transcripts.cnn.com")
          .addSubdomainBlacklist("weather.cnn.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/CNN/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/CNNI/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/calculator/"))
          // E.g. /comment-page-9/
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/comment-page-")
              .setLocation(Location.CONTAINS))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/data/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/gallery/")
              .setLocation(Location.CONTAINS))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/infographic/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/interactive/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/linkto/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/quizzes/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/services/"))
          .addParagraphSelector(".cnnStoryContent p") // Really old articles.
          .addParagraphSelector(".cnn_storyarea p")
          .addParagraphSelector("p.cnn_storypgraphtxt")
          .addParagraphSelector("p.zn-body__paragraph")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://brainstormtech.blogs.fortune.cnn.com/2009/11/06/andreessen-on-skype/")
                  .addArticleUrl("http://eatocracy.cnn.com/2010/05/12/chef-besh-eat-u-s-seafood-save-a-way-of-life/")
                  .addArticleUrl("http://eatocracy.cnn.com/2014/08/07/summer-only-treats/")
                  .addArticleUrl("http://edition.cnn.com/2013/02/04/opinion/opinion-boredom-work-mark-de-rond-route-to-the-top/index.html")
                  .addArticleUrl("http://features.blogs.fortune.cnn.com/2012/02/27/general-motors-last-tango-in-paris/")
                  .addArticleUrl("http://finance.fortune.cnn.com/2011/05/10/yes-microsoft-is-buying-skype/")
                  .addArticleUrl("http://management.fortune.cnn.com/2011/06/30/harvard-business-school-extreme-makeover/")
                  .addArticleUrl("http://postcards.blogs.fortune.cnn.com/2011/10/20/buffett-rule/")
                  .addArticleUrl("http://tech.fortune.cnn.com/2010/10/04/verizons-refund-is-just-the-start-of-a-shakeup-in-wireless/")
                  .addArticleUrl("http://travel.cnn.com/face-face-portraits-human-spirit-046291")
                  .addArticleUrl("http://www.cnn.com/2003/HEALTH/02/16/false.memory.ap/index.html")
                  .addArticleUrl("http://www.cnn.com/2005/TECH/science/05/12/new.species.ap/index.html")
                  .addArticleUrl("http://www.cnn.com/2011/11/09/studentnews/black-in-america-silicon-valley-educator-parent-guide/index.html")
                  .addArticleUrl("http://www.cnn.com/2011/SHOWBIZ/Music/02/16/grace.potter.soundcheck")
                  .addArticleUrl("http://www.cnn.com/2014/07/14/sport/football/world-cup-team-of-the-tournament/index.html")
                  .addArticleUrl("http://www.cnn.com/2014/11/28/tech/innovation/smart-sports-equipment/index.html")
                  .addArticleUrl("http://www.cnn.com/2014/12/16/tech/web/google-year-in-search-2014/index.html")
                  .addArticleUrl("http://www.cnn.com/2014/12/23/world/africa/nigeria-boko-haram-leposo/index.html")
                  .addArticleUrl("http://www.cnn.com/2015/01/30/asia/china-dragon-dinosaur/index.html")
                  .addArticleUrl("http://www.cnn.com/2015/01/30/entertainment/suge-knight-hit-and-run/index.html")
                  .addArticleUrl("http://www.cnn.com/SPECIALS/2010/building.up.america/index.html")
                  .addNonArticleUrl("http://cnn.com")
                  .addNonArticleUrl("http://cnn.com/about/")
                  .addNonArticleUrl("http://eatocracy.cnn.com")
                  .addNonArticleUrl("http://eatocracy.cnn.com/category/5-things-to-know-for-your-new-day/")
                  .addNonArticleUrl("http://eatocracy.cnn.com/category/news/business-and-farming-news/fast-food-business-and-farming-news/chick-fil-a/")
                  .addNonArticleUrl("http://edition.cnn.com/LATINAMERICA")
                  .addNonArticleUrl("http://edition.cnn.com/interactive_legal.html")
                  .addNonArticleUrl("http://mobileworldcongress.edition.cnn.com/Event/Mobile_World_Congress_2014_As_it_happens")
                  .addNonArticleUrl("http://tech.fortune.cnn.com/category/enterprise/")
                  .addNonArticleUrl("http://topics.cnn.com/topics/Bullying")
                  .addNonArticleUrl("http://www.cnn.com")
                  .addNonArticleUrl("http://www.cnn.com/tools/index.html"))
              .setUrlWhitelistChecks(UrlWhitelistChecks.newBuilder()
                  .addBadUrl("http://eatocracy.cnn.com/2010/06/18/are-you-still-working-on-that/comment-page-9/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("curbed.com")
          .addStartUrl("http://curbed.com")
          .addStartUrl("http://sf.curbed.com")
          .addStartUrl("http://la.curbed.com")
          .addStartUrl("http://ny.curbed.com")
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/search.php")
              .setLocation(Location.ENDS_WITH))
          .addParagraphSelector(".post-body > p")
          .addParagraphSelector(".post-body > .post-more > p")
          .addParagraphSelector(".post-body > .quicklink-body > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://curbed.com/archives/2014/12/30/best-homes-architectural-digest-dwell-house-beautiful.php")
                  .addArticleUrl("http://la.curbed.com/archives/2014/12/the_21_best_los_angeles_maps_of_2014.php")
                  .addArticleUrl("http://seattle.curbed.com/archives/2014/12/five-properties-worth-buying-along-metro-bus-route-355.php")
                  .addArticleUrl("http://ski.curbed.com/archives/2015/02/new-utah-blueprint-threatens-the-future-of-one-wasatch.php")
                  .addArticleUrl("http://sf.curbed.com/archives/2015/02/13/vintage_airline_posters_that_lured_tourists_to_san_francisco.php")
                  .addNonArticleUrl("http://curbed.com/")
                  .addNonArticleUrl("http://curbed.com/tags/top")
                  .addNonArticleUrl("http://curbed.com/search.php?origin=cna&sites=all&blogs=1,5,7,8,20,29,32,33,34,42,45,46,47,49,54,65&query=moose")
                  .addNonArticleUrl("http://ski.curbed.com/authors/katie-shapiro")
                  .addNonArticleUrl("http://ski.curbed.com/archives/categories/park_city.php"))
              .setUrlWhitelistChecks(UrlWhitelistChecks.newBuilder()
                  .addGoodUrl("http://curbed.com/archives/2014/12/30/best-homes-architectural-digest-dwell-house-beautiful.php")
                  .addGoodUrl("http://la.curbed.com/archives/2014/12/the_21_best_los_angeles_maps_of_2014.php")
                  .addGoodUrl("http://seattle.curbed.com/archives/2014/12/five-properties-worth-buying-along-metro-bus-route-355.php")
                  .addGoodUrl("http://ski.curbed.com/archives/2015/02/new-utah-blueprint-threatens-the-future-of-one-wasatch.php")
                  .addGoodUrl("http://ski.curbed.com/archives/2015/02/new-utah-blueprint-threatens-the-future-of-one-wasatch.php")
                  .addBadUrl("http://sf.curbed.com/search.php")
                  .addBadUrl("http://ny.curbed.com/search.php")
                  .addBadUrl("http://la.curbed.com/search.php")
                  .addBadUrl("http://curbed.com/search.php")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("engadget.com")
          .addStartUrl("http://www.engadget.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/apps/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/discuss/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/event/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/expand/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/gallery/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/login/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/past-events/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/products/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/register/"))
          .addParagraphSelector(".article-content p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.engadget.com/2010/10/26/the-playstation-phone/")
                  .addArticleUrl("http://www.engadget.com/2011/02/08/nokia-ceo-stephen-elop-rallies-troops-in-brutally-honest-burnin/")
                  .addArticleUrl("http://www.engadget.com/2015/02/11/what-you-could-buy-with-apple-700-billion-market-cap/")
                  .addArticleUrl("http://www.engadget.com/2015/02/14/nasa-space-imaging-technology/")
                  .addArticleUrl("http://www.engadget.com/2015/02/15/microsoft-computer-vision-beats-humans/")
                  .addNonArticleUrl("http://www.engadget.com/about/editors/billy-steele/")
                  .addNonArticleUrl("http://www.engadget.com/about/editors/joshua-topolsky/")
                  .addNonArticleUrl("http://www.engadget.com/features/")
                  .addNonArticleUrl("http://www.engadget.com/reviews/headphones/")
                  .addNonArticleUrl("http://www.engadget.com/tag/nintendo64/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("fastcompany.com")
          .addStartUrl("http://www.fastcompany.com")
          .addSubdomainBlacklist("magazine.fastcompany.com")
          .addSubdomainBlacklist("mediakit.fastcompany.com")
          .addParagraphSelector(".article-prose p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.fastcompany.com/3029883/bottom-line/11-famous-entrepreneurs-share-how-they-overcame-their-biggest-failure")
                  .addArticleUrl("http://www.fastcompany.com/3040001/science-backed-tactics-for-motivating-other-people")
                  .addArticleUrl("http://www.fastcompany.com/3041435/revolutionizing-work/startups-revolutionizing-work")
                  .addArticleUrl("http://www.fastcompany.com/3042103/the-recommender/how-to-binge-watch-high-maintenance-on-vimeo-your-episode-guide-ranked-by-po")
                  .addArticleUrl("http://www.fastcompany.com/3042317/the-attitude-shift-that-guarantees-your-success")
                  .addNonArticleUrl("http://www.fastcompany.com/section/the-recommender")
                  .addNonArticleUrl("http://www.fastcompany.com/magazine/191/december-2014-january-2015")
                  .addNonArticleUrl("http://www.fastcompany.com/user/vivian-giang")
                  .addNonArticleUrl("http://www.fastcompany.com/about-us")
                  .addNonArticleUrl("http://www.fastcompany.com/contact-us")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("forbes.com")
          .addStartUrl("http://www.forbes.com")
          .addSubdomainBlacklist("blogs.forbes.com") // This is their account management site.
          .addSubdomainBlacklist("related.forbes.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/account/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/pictures/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/video/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle(".*\\/[0-9]{1,3}\\/$") // Page 2, 3, etc.
              .setLocation(Location.REGEX_MATCH))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/print/")
              .setLocation(Location.ENDS_WITH))
          .addParagraphSelector(".article_body p")
          .addParagraphSelector(".article-body p")
          .addParagraphSelector(".article-content-body p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.forbes.com/sites/aliciaadamczyk/2015/02/14/new-york-fashion-week-fall-2015-lacostes-origin-story/")
                  .addArticleUrl("http://www.forbes.com/sites/natalierobehmed/2014/09/29/the-youngest-billionaires-on-the-forbes-400-11-under-40/")
                  .addArticleUrl("http://www.forbes.com/sites/russellflannery/2015/01/08/li-ka-shing-is-hong-kongs-richest-man-for-17th-consecutive-year/")
                  .addArticleUrl("http://www.forbes.com/sites/steveschaefer/2015/02/11/retirement-playbook-six-coaching-legends-on-how-to-keep-winning/")
                  .addArticleUrl("http://www.forbes.com/sites/zackomalleygreenburg/2015/01/09/five-music-business-takeaways-from-ces-2015/")
                  .addNonArticleUrl("http://www.forbes.com/")
                  .addNonArticleUrl("http://www.forbes.com/conferences/2015/Under30Summit.html")
                  .addNonArticleUrl("http://www.forbes.com/fdc/privacy.html")
                  .addNonArticleUrl("http://www.forbes.com/forbeslife/food-drink/")
                  .addNonArticleUrl("http://www.forbes.com/leadership/")
                  .addNonArticleUrl("http://www.forbes.com/sites/katiebell/"))
              .setUrlWhitelistChecks(UrlWhitelistChecks.newBuilder()
                  .addBadUrl("http://www.forbes.com/sites/nickmorgan/2015/01/08/"
                      + "which-is-more-important-authenticity-or-charisma/2/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("fortune.com")
          .addStartUrl("http://fortune.com")
          .addSubdomainBlacklist("backissues.fortune.com")
          .addSubdomainBlacklist("realestate.fortune.com")
          .addSubdomainBlacklist("subscription.fortune.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/40-under-40/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/application/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/best-companies/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/company/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/etf/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/feedback/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/fortune500/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/global500/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/heroes-of-the-500/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/most-powerful-women/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/mpw/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/rankings/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/video/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/worlds-most-admired-companies/"))
          .addParagraphSelector(".article-body-text > p")
          .addParagraphSelector(".entry-content p") // To work around Javascript-rendered pages.
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://fortune.com/2015/02/13/here-are-3-people-profiting-from-the-business-of-love/")
                  .addArticleUrl("http://fortune.com/2015/02/14/tapped-in-the-sweet-taste-of-sour-beers-makes-a-comeback/")
                  .addArticleUrl("http://fortune.com/2015/01/06/ces-2015-the-mainstreaming-of-4k-tvs/")
                  .addArticleUrl("http://fortune.com/2015/02/09/shark-tank-the-lost-pitches/")
                  .addArticleUrl("http://fortune.com/2014/11/06/starbucks-brings-back-eggnog-latte-after-outcry/")
                  .addArticleUrl("http://fortune.com/2014/11/12/864039/")
                  .addNonArticleUrl("http://fortune.com/author/chris-morris/")
                  .addNonArticleUrl("http://fortune.com/autos/")
                  .addNonArticleUrl("http://fortune.com/sitemap/1933/")
                  .addNonArticleUrl("http://fortune.com/tag/fortune-live/")
                  .addNonArticleUrl("http://fortune.com/tag/starbucks/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("gizmodo.com")
          .addStartUrl("http://www.gizmodo.com")
          .addParagraphSelector("article > p")
          .addParagraphSelector("article > div > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://gizmodo.com/canon-5ds-and-5ds-r-the-highest-resolution-full-frame-1683275915")
                  .addArticleUrl("http://gizmodo.com/canon-5ds-and-5ds-r-the-highest-resolution-full-frame-1683275915/+michaelhession")
                  .addArticleUrl("http://gizmodo.com/hackers-stole-hundreds-of-millions-in-massive-malware-b-1685908496")
                  .addArticleUrl("http://gizmodo.com/newspaper-dumps-george-will-over-atrocious-rape-column-1593126677")
                  .addArticleUrl("http://paleofuture.gizmodo.com/heres-what-skype-was-like-in-1947-1685715294")
                  .addArticleUrl("http://toyland.gizmodo.com/forget-zelda-this-20-inch-link-figure-is-worthy-of-an-1685818837")
                  .addNonArticleUrl("http://gizmodo.com/295268/")
                  .addNonArticleUrl("http://gizmodo.com/5732042/about-gizmodo-for-beta")
                  .addNonArticleUrl("http://gizmodo.com/search?q=hello")
                  .addNonArticleUrl("http://gizmodo.com/tag/gizmodo")
                  .addNonArticleUrl("http://toyland.gizmodo.com/rss")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("latimes.com")
          .addStartUrl("http://www.latimes.com")
          .addSubdomainBlacklist("advertise.latimes.com")
          .addSubdomainBlacklist("classifieds.latimes.com")
          .addSubdomainBlacklist("digitalservices.latimes.com")
          .addSubdomainBlacklist("datadesk.latimes.com")
          .addSubdomainBlacklist("dailydeals.latimes.com")
          .addSubdomainBlacklist("discussions.latimes.com")
          .addSubdomainBlacklist("documents.latimes.com")
          .addSubdomainBlacklist("ee.latimes.com")
          .addSubdomainBlacklist("framework.latimes.com")
          .addSubdomainBlacklist("games.latimes.com")
          .addSubdomainBlacklist("graphics.latimes.com")
          .addSubdomainBlacklist("guides.latimes.com")
          .addSubdomainBlacklist("ilivehere.latimes.com")
          .addSubdomainBlacklist("localdeals.latimes.com")
          .addSubdomainBlacklist("marketplace.latimes.com")
          .addSubdomainBlacklist("marketplaceads.latimes.com")
          .addSubdomainBlacklist("mediakit.latimes.com")
          .addSubdomainBlacklist("membership.latimes.com")
          .addSubdomainBlacklist("myaccount2.latimes.com")
          .addSubdomainBlacklist("placeanad.latimes.com")
          .addSubdomainBlacklist("projects.latimes.com")
          .addSubdomainBlacklist("recipes.latimes.com")
          .addSubdomainBlacklist("schools.latimes.com")
          .addSubdomainBlacklist("store.latimes.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/classified/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/shopping/"))
          .addParagraphSelector(".trb_article_page > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.latimes.com/books/jacketcopy/la-et-jc-sherlock-holmes-belongs-to-us-all-20141103-story.html")
                  .addArticleUrl("http://www.latimes.com/business/hiltzik/la-fi-mh-issas-big-dud-20141224-column.html")
                  .addArticleUrl("http://www.latimes.com/food/dailydish/la-dd-recipes-for-santa-or-yourself-on-christmas-eve-20141222-storygallery.html")
                  .addArticleUrl("http://www.latimes.com/la-california-20141016-htmlstory.html")
                  .addArticleUrl("http://www.latimes.com/la-me-aqueduct-comments-20131028,0,3652614.story")
                  .addArticleUrl("http://www.latimes.com/local/crime/la-me-lapd-trust-20140828-story.html#page=1")
                  .addArticleUrl("http://www.latimes.com/local/la-me-c1-aqueduct-bomber-20131030-dto,0,7855162.htmlstory")
                  .addArticleUrl("http://www.latimes.com/local/lanow/la-me-ln-fire-homeless-20140504,0,756604.story")
                  .addArticleUrl("http://www.latimes.com/local/lanow/la-me-ln-lightning-rain-storms-southern-california-20150130-story.html")
                  .addArticleUrl("http://www.latimes.com/local/lanow/la-me-ln-measles-outbreak-hits-marin-county-20150130-story.html")
                  .addArticleUrl("http://www.latimes.com/news/politics/la-na-rove14aug14,1,1728147.story")
                  .addArticleUrl("http://www.latimes.com/sports/sportsnow/la-sp-sn-nhl-all-star-zemgus-girgensons20141230-story.html")
                  .addNonArticleUrl("http://crime.latimes.com")
                  .addNonArticleUrl("http://latimesblogs.latimes.com/alltherage/")
                  .addNonArticleUrl("http://www.latimes.com")
                  .addNonArticleUrl("http://www.latimes.com/aboutus")
                  .addNonArticleUrl("http://www.latimes.com/business/personalfinance/")
                  .addNonArticleUrl("http://www.latimes.com/topic/crime-law-justice/law-enforcement/los-angeles-police-department-ORGOV000939.topic")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("mashable.com")
          .addStartUrl("http://www.mashable.com")
          .addSubdomainBlacklist("events.mashable.com")
          .addSubdomainBlacklist("findjobs.mashable.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/login/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/search/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/sgs/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/media-summit/"))
          .addParagraphSelector(".article-content p")
          .addParagraphSelector(".long-card p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://mashable.com/2008/12/19/how-to-win-twitter-friends/")
                  .addArticleUrl("http://mashable.com/2015/01/08/apple-app-store-stats-2015/")
                  .addArticleUrl("http://mashable.com/2015/01/27/apple-watch-april/")
                  .addArticleUrl("http://mashable.com/2015/01/27/dad-rap/")
                  .addArticleUrl("http://mashable.com/2015/01/27/robert-kraft-patriots-deflategate/")
                  .addArticleUrl("http://mashable.com/2015/01/30/18-new-photos-game-of-thrones-season-5/")
                  .addArticleUrl("http://mashable.com/2015/01/30/ball-pond-adults-london/")
                  .addArticleUrl("http://mashable.com/2015/01/30/innovative-at-work/")
                  .addArticleUrl("http://mashable.com/2015/01/30/lego-marvel-helicarrier/")
                  .addArticleUrl("http://mashable.com/2015/01/30/starbucks-seahawks-frappuccino/")
                  .addArticleUrl("http://mashable.com/2015/02/14/copenhagen-shooting/")
                  .addNonArticleUrl("http://mashable.com/category/must-reads/")
                  .addNonArticleUrl("http://mashable.com/category/star-wars/")
                  .addNonArticleUrl("http://mashable.com/people/542037e35198404f2f004322/")
                  .addNonArticleUrl("http://mashable.com/search/?q=hello&commit=Search")
                  .addNonArticleUrl("http://mashable.com/watercooler/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("medium.com")
          .addStartUrl("http://medium.com")
          .addStartUrl("https://medium.com/top-100/")
          .addParagraphSelector(".section-content p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("https://medium.com/@chrismessina/thoughts-on-google-8883844a9ca4")
                  .addArticleUrl("https://medium.com/foreword/everybodys-taking-aim-e61603f34845")
                  .addArticleUrl("https://medium.com/life-hacks-for-business/the-x-factor-that-every-professional-needs-13f4ef0d3e37")
                  .addArticleUrl("https://medium.com/p/3e7ffc93b5f3")
                  .addArticleUrl("https://medium.com/reportedly/ayotzinapa-supporters-use-their-nude-bodies-as-protest-art-fbc3f5d76bc8")
                  .addNonArticleUrl("https://medium.com/@acarvin")
                  .addNonArticleUrl("https://medium.com/leadership-journal")
                  .addNonArticleUrl("https://medium.com/life-hacks-for-business")
                  .addNonArticleUrl("https://medium.com/matter/featured")
                  .addNonArticleUrl("https://medium.com/reportedly/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("mercurynews.com")
          .addStartUrl("http://www.mercurynews.com")
          .addSubdomainBlacklist("mylocal.mercurynews.com")
          .addSubdomainBlacklist("re.mercurynews.com")
          .addSubdomainBlacklist("yourviews.mercurynews.com")
          .addParagraphSelector(".articleBody > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://realestate.mercurynews.com/2015/02/06/facebook-purchases-56-acres-in-menlo-park/")
                  .addArticleUrl("http://www.mercurynews.com/bay-area-living/ci_27235425/phallic-looking-play-doh-toy-yanked-after-backlash")
                  .addArticleUrl("http://www.mercurynews.com/business/ci_24450039/twitter-increases-ipo-price-range-following-facebooks-path")
                  .addArticleUrl("http://www.mercurynews.com/ci_18730079")
                  .addArticleUrl("http://www.mercurynews.com/ci_18730079?IADID=Search-www.mercurynews.com-www.mercurynews.com%0A")
                  .addArticleUrl("http://www.mercurynews.com/bay-area-news/ci_27528549/rotten-at-core-downtown-san-jose-may-finally")
                  .addArticleUrl("http://www.mercurynews.com/peninsula/ci_27456164/mountain-view-council-agrees-resurrect-housing-question-north")
                  .addNonArticleUrl("http://www.mercurynews.com/")
                  .addNonArticleUrl("http://www.mercurynews.com/real-estate-news/")
                  .addNonArticleUrl("http://www.mercurynews.com/opinion")
                  .addNonArticleUrl("http://www.mercurynews.com/scott-herhold")
                  .addNonArticleUrl("http://www.mercurynews.com/portlet/layout/html/privacypolicy/privacypolicy.jsp?siteId=568")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("money.cnn.com")
          .addStartUrl("http://money.cnn.com")
          .addSubdomainBlacklist("cgi.money.cnn.com")
          .addSubdomainBlacklist("jobsearch.money.cnn.com")
          .addSubdomainBlacklist("portfolio.money.cnn.com")
          .addSubdomainBlacklist("realestate.money.cnn.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/data/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/galleries/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/gallery/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/quote/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/magazines/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/profile/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/tag/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/tools/"))
          .addParagraphSelector("div#storytext p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://buzz.money.cnn.com/2013/01/25/herbalife-ackman-icahn/")
                  .addArticleUrl("http://money.cnn.com/2006/08/09/technology/webaroundtheworld.biz2/")
                  .addArticleUrl("http://money.cnn.com/2014/02/19/technology/social/facebook-whatsapp/")
                  .addArticleUrl("http://money.cnn.com/2015/02/09/technology/online-dating-coaches/index.html")
                  .addArticleUrl("http://money.cnn.com/2015/02/13/investing/valentines-day-1800flowers-ftd/index.html")
                  .addNonArticleUrl("http://buzz.money.cnn.com")
                  .addNonArticleUrl("http://buzz.money.cnn.com/author/brooneycnn/")
                  .addNonArticleUrl("http://economy.money.cnn.com/author/cnnkurtz/")
                  .addNonArticleUrl("http://money.cnn.com/data/markets/")
                  .addNonArticleUrl("http://money.cnn.com/services/closed-captioning.html")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("nytimes.com")
          .addStartUrl("http://www.nytimes.com")
          .addStartUrl("http://opinionator.blogs.nytimes.com/")
          .addSubdomainBlacklist("jobmarket.nytimes.com")
          .addSubdomainBlacklist("homedelivery.nytimes.com")
          .addSubdomainBlacklist("mobile.nytimes.com")
          .addSubdomainBlacklist("autos.nytimes.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/content/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/rss")
              .setLocation(Location.EQUALS))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/rss/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/ref/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/adx/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/content/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/register")
              .setLocation(Location.EQUALS))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/services/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/slideshow/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/subscriptions/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/times-journeys/"))
          .addParagraphSelector(".articleBody > p")
          .addParagraphSelector("article > p")
          .addParagraphSelector("article > div > p")
          .addParagraphSelector("nyt_text > p")
          .addParagraphSelector("p.story-body-text")
          .addParagraphSelector("#mod-a-body-first-para > p")
          .addParagraphSelector("#mod-a-body-after-first-para > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://bits.blogs.nytimes.com/2014/04/24/vic-gundotra-google-plus-lead-departing/")
                  .addArticleUrl("http://bits.blogs.nytimes.com/2014/12/31/qwant-wants-to-be-alternative-to-google/")
                  .addArticleUrl("http://bits.blogs.nytimes.com/2015/01/30/verizon-wireless-to-allow-complete-opt-out-of-mobile-supercookies/")
                  .addArticleUrl("http://boss.blogs.nytimes.com/2014/12/22/rethinking-the-relationship-between-bosses-and-employees/")
                  .addArticleUrl("http://dealbook.nytimes.com/2014/02/09/the-new-normal-for-tech-companies-and-others-the-stealth-i-p-o/")
                  .addArticleUrl("http://dotearth.blogs.nytimes.com/2014/12/31/tracing-the-roots-of-pope-franciss-climate-plans-for-2015/")
                  .addArticleUrl("http://opinionator.blogs.nytimes.com/2013/09/28/the-enigma-of-chinese-medicine/")
                  .addArticleUrl("http://www.nytimes.com/1993/11/16/business/house-banking-chairman-increases-pressure-on-the-fed.html")
                  .addArticleUrl("http://www.nytimes.com/2014/10/27/business/media/how-facebook-is-changing-the-way-its-users-consume-journalism.html")
                  .addArticleUrl("http://www.nytimes.com/2015/01/01/us/politics/arizona-supreme-court-allows-challenge-to-states-medicaid-expansion.html")
                  .addArticleUrl("http://www.nytimes.com/2015/01/16/business/swiss-national-bank-euro-franc-exchange-rate.html")
                  .addArticleUrl("http://www.nytimes.com/2015/01/31/sports/football/no-1-debate-in-tampa-whether-to-draft-jameis-winston.html")
                  .addArticleUrl("http://www.nytimes.com/2015/01/31/your-money/paying-for-college/the-wouldve-shouldve-and-couldve-of-taxing-529-plans.html")
                  .addArticleUrl("http://www.nytimes.com/2015/02/01/magazine/black-mirror-and-the-horrors-and-delights-of-technology.html")
                  .addArticleUrl("http://www.nytimes.com/2015/02/01/nyregion/for-manoush-zomorodi-time-for-some-conscious-unplugging.html")
                  .addArticleUrl("http://www.nytimes.com/2015/02/01/travel/you-googled-it-we-answered-it.html")
                  .addArticleUrl("http://www.nytimes.com/2015/02/01/your-money/why-you-should-tell-your-kids-how-much-you-make.html")
                  .addArticleUrl("http://www.nytimes.com/aponline/2014/04/11/us/ap-us-salesforce-san-francisco-lease.html")
                  .addArticleUrl("http://www.nytimes.com/aponline/2015/01/30/business/ap-us-google-money-management.html")
                  .addArticleUrl("http://well.blogs.nytimes.com/2013/04/29/really-the-claim-evening-primrose-oil-soothes-eczema/")
                  .addNonArticleUrl("http://homedelivery.nytimes.com")
                  .addNonArticleUrl("http://mobile.nytimes.com")
                  .addNonArticleUrl("http://www.nytimes.com/content/help/rights/copyright/copyright-notice.html")
                  .addNonArticleUrl("http://www.nytimes.com/rss")
                  .addNonArticleUrl("http://rss.nytimes.com/services/xml/rss/nyt/SmallBusiness.xml")
                  .addNonArticleUrl("http://www.nytimes.com"))
              .setUrlWhitelistChecks(UrlWhitelistChecks.newBuilder()
                  .addGoodUrl("http://www.nytimes.com/")
                  .addGoodUrl("http://www.nytimes.com/2014/12/27/your-money/what-annie-can-tell-us-about-money.html")
                  .addGoodUrl("http://www.nytimes.com/2014/12/26/your-money/affordable-care-acts-tax-effects-now-loom-for-filers.html")
                  .addGoodUrl("http://www.nytimes.com/2014/12/26/opinion/david-brooks-the-sidney-awards-part-i.html")
                  .addGoodUrl("http://www.nytimes.com/2014/12/21/business/corner-office-robert-reid-of-intacct-the-culture-always-comes-first.html")
                  .addGoodUrl("http://www.nytimes.com/2004/03/07/magazine/our-correspondent-in-cape-town-south-africa-geology-is-destiny.html")
                  .addGoodUrl("http://www.nytimes.com/2014/12/28/realestate/selling-condos-with-holograms.html")
                  .addGoodUrl("http://dealbook.nytimes.com/2014/12/25/unsolved-shooting-accentuates-problems-at-doral-one-of-puerto-ricos-biggest-lenders/")
                  .addGoodUrl("http://www.nytimes.com/2004/04/30/business/the-google-ipo-wall-street-an-egalitarian-auction-bankers-are-not-amused.html")
                  .addGoodUrl("http://nytimes.com/2014/12/27/your-money/what-annie-can-tell-us-about-money.html")
                  .addGoodUrl("http://nytimes.com/2014/12/26/your-money/affordable-care-acts-tax-effects-now-loom-for-filers.html")
                  .addGoodUrl("http://nytimes.com/2014/12/26/opinion/david-brooks-the-sidney-awards-part-i.html")
                  .addGoodUrl("http://www.nytimes.com/1992/11/04/us/1992-elections-president-overview-clinton-captures-presidency-with-huge.html")
                  .addGoodUrl("http://www.nytimes.com/1865/04/15/news/president-lincoln-shot-assassin-deed-done-ford-s-theatre-last-night-act.html")
                  .addGoodUrl("http://publiceditor.blogs.nytimes.com/2014/12/22/sony-emails-free-speech-and-trying-a-little-f2f/")
                  .addBadUrl("http://jobmarket.nytimes.com/pages/jobs/index.html")
                  .addBadUrl("http://autos.nytimes.com/15229-19UUA8F59CA030453/Acura/TL/listingOverview.aspx")
                  .addBadUrl("http://www.nytimes.com/times-journeys/travel/follow-silk-route-uzbekistan-turkmenistan/terms/")
                  .addBadUrl("http://www.nytimes.com/times-journeys/travel/colorful-spirit-columbia/")
                  .addBadUrl("http://homedelivery.nytimes.com")
                  .addBadUrl("http://mobile.nytimes.com")
                  .addBadUrl("http://www.nytimes.com/content/help/rights/copyright/copyright-notice.html")
                  .addBadUrl("http://www.nytimes.com/rss")
                  .addBadUrl("http://www.nytimes.com/services/xml/rss/nyt/index.opml")
                  .addBadUrl("http://www.nytimes.com/ref/multimedia/podcasts.html")
                  .addBadUrl("http://www.nytimes.com/adx/bin/adx_click.html")
                  .addBadUrl("http://www.nytimes.com/content/help/contact/directory.html")
                  .addBadUrl("http://www.nytimes.com/register")
                  .addBadUrl("http://www.nytimes.com/slideshow/2014/12/14/fashion/NOTEWORTHY-STYLE-2014.html")
                  .addBadUrl("http://www.nytimes.com/subscriptions/Multiproduct/lp5558.html")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("pcmag.com")
          .addStartUrl("http://www.pcmag.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/best-deals-today"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/join/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/slideshow/"))
          .addParagraphSelector(".article-body p")
          .addParagraphSelector(".blogstory p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.pcmag.com/article2/0,2817,1904319,00.asp")
                  .addArticleUrl("http://www.pcmag.com/article2/0,2817,2430291,00.asp")
                  .addArticleUrl("http://www.pcmag.com/article2/0,2817,2469447,00.asp")
                  .addArticleUrl("http://www.pcmag.com/article2/0,2817,2470682,00.asp")
                  .addArticleUrl("http://www.pcmag.com/article2/0,2817,2475453,00.asp")
                  .addNonArticleUrl("http://www.pcmag.com/author-bio/kathy-yakal")
                  .addNonArticleUrl("http://www.pcmag.com/newsletter_manage/")
                  .addNonArticleUrl("http://www.pcmag.com/reviews/cell-phones/company/apple-inc")
                  .addNonArticleUrl("http://www.pcmag.com/site_map/")
                  .addNonArticleUrl("http://www.pcmag.com/reviews/laptop-computers")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("recode.net")
          .addStartUrl("http://recode.net")
          .addSubdomainBlacklist("on.recode.net")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/events/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/follow-us/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/next/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/sponsored-content/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/video/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/wp-admin/"))
          .addParagraphSelector(".postarea p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://recode.net/2014/01/31/heres-the-internal-memos-from-microsoft-about-top-ad-exec-departure/")
                  .addArticleUrl("http://recode.net/2014/04/24/exclusive-google-head-vic-gundotra-leaving-company/")
                  .addArticleUrl("http://recode.net/2014/10/24/google-ceo-larry-page-reorgs-staff-anoints-sundar-pichai-as-new-product-czar/")
                  .addArticleUrl("http://recode.net/2015/01/12/sap-profit-holds-up-in-q4-as-cloud-shift-accelerates/")
                  .addArticleUrl("http://recode.net/2015/01/12/suhd-quantum-dots-and-nano-what-your-guide-to-tv-terms-for-2015/")
                  .addNonArticleUrl("http://recode.net/2014/01/")
                  .addNonArticleUrl("http://recode.net/event-sponsorship/")
                  .addNonArticleUrl("http://recode.net/events/code-media/")
                  .addNonArticleUrl("http://recode.net/sponsor-content-policy/")
                  .addNonArticleUrl("http://recode.net/newsletters/subscribe/")
                  .addNonArticleUrl("http://recode.net/category/reviews/page/4/")
                  .addNonArticleUrl("http://recode.net/events/code-mobile-2014/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("redherring.com")
          .addStartUrl("http://www.redherring.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/events/"))
          .addParagraphSelector(".entry-content p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.redherring.com/finance/alibabas-road-largest-ipo-ever/")
                  .addArticleUrl("http://www.redherring.com/finance/uber-raises-another-1-2bn-staggering-40bn-valuation/")
                  .addArticleUrl("http://www.redherring.com/mobile/drones-looking-beyond-fear/")
                  .addArticleUrl("http://www.redherring.com/finance/10-2014s-largest-pre-ipo-funding-rounds/")
                  .addArticleUrl("http://www.redherring.com/startups/twitters-user-growth-worry-anthem-security-breach-wheeler-makes-net-neutrality-stand/")
                  .addNonArticleUrl("http://www.redherring.com/category/consumer/")
                  .addNonArticleUrl("http://www.redherring.com/category/enterprise/")
                  .addNonArticleUrl("http://www.redherring.com/category/startups/page/3/")
                  .addNonArticleUrl("http://www.redherring.com/contact-us/")
                  .addNonArticleUrl("http://www.redherring.com/press-media/"))
              .setUrlWhitelistChecks(UrlWhitelistChecks.newBuilder()
                  .addBadUrl("http://www.redherring.com/events/red-herring-global/")
                  .addBadUrl("http://www.redherring.com/events/top-100/testimonials/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("sfgate.com")
          .addStartUrl("http://www.sfgate.com")
          .addSubdomainBlacklist("cars.sfgate.com")
          .addSubdomainBlacklist("events.sfgate.com")
          .addSubdomainBlacklist("extras.sfgate.com")
          .addSubdomainBlacklist("fanshop.sfgate.com")
          .addSubdomainBlacklist("homeguides.sfgate.com")
          .addSubdomainBlacklist("markets.sfgate.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/merge/"))
          .addParagraphSelector(".article-body p")
          .addParagraphSelector(".entry p")
          .addParagraphSelector(".post-contents p")
          .addParagraphSelector("#article-section .entry div")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://blog.sfgate.com/49ers/2014/12/29/baalke-price-tag-was-too-high-to-trade-up-for-odell-beckham/")
                  .addArticleUrl("http://blog.sfgate.com/49ers/2014/12/30/jed-york-on-knbr-winning-with-class-is-what-matters/")
                  .addArticleUrl("http://insidescoopsf.sfgate.com/blog/2014/12/17/your-guide-to-the-progress-the-new-sequel-to-state-bird-provisions/")
                  .addArticleUrl("http://www.sfgate.com/49ers/article/49ers-say-goodbye-to-Jim-Harbaugh-and-a-5982751.php")
                  .addArticleUrl("http://www.sfgate.com/entertainment/garchik/article/Back-of-the-Datebook-gang-pitches-in-to-rescue-5976457.php")
                  .addNonArticleUrl("http://blog.sfgate.com/49ers/")
                  .addNonArticleUrl("http://blog.sfgate.com/dailydish/")
                  .addNonArticleUrl("http://blog.sfgate.com/dailydish/2005/08/")
                  .addNonArticleUrl("http://finance.sfgate.com")
                  .addNonArticleUrl("http://healthyeating.sfgate.com")
                  .addNonArticleUrl("http://www.sfgate.com")
                  .addNonArticleUrl("http://www.sfgate.com/entertainment/blogs/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("siliconbeat.com")
          .addStartUrl("http://www.siliconbeat.com")
          .addParagraphSelector(".post-content > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.siliconbeat.com/2014/02/28/adobe-to-donate-300-million-in-software-to-schools/")
                  .addArticleUrl("http://www.siliconbeat.com/2015/02/12/rashgate-fitbit-and-the-itch-you-cant-scratch/")
                  .addArticleUrl("http://www.siliconbeat.com/2015/02/10/tesla-earnings-what-to-watch/")
                  .addArticleUrl("http://www.siliconbeat.com/2015/02/13/linkedin-data-where-do-google-facebook-and-other-major-tech-companies-hire-from/")
                  .addArticleUrl("http://www.siliconbeat.com/2015/02/10/disgraced-puc-boss-peevey-to-be-honored-by-cronies/")
                  .addNonArticleUrl("http://www.siliconbeat.com/")
                  .addNonArticleUrl("http://www.siliconbeat.com/2014/02/")
                  .addNonArticleUrl("http://www.siliconbeat.com/about-siliconbeat/")
                  .addNonArticleUrl("http://www.siliconbeat.com/about-siliconbeat/?uid=36")
                  .addNonArticleUrl("http://www.siliconbeat.com/category/big-data/")
                  .addNonArticleUrl("http://www.siliconbeat.com/category/mobile-2/")
                  .addNonArticleUrl("http://www.siliconbeat.com/category/mobile-2/page/2/")
                  .addNonArticleUrl("http://www.siliconbeat.com/page/195/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("slate.com")
          .addStartUrl("http://www.slate.com")
          .addSubdomainBlacklist("innovate.slate.com")
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/podcasts/")
              .setLocation(Location.CONTAINS))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/slate_fare/")
              .setLocation(Location.CONTAINS))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/video/")
              .setLocation(Location.CONTAINS))
          .addParagraphSelector(".body .text")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.slate.com/articles/health_and_science/science/2014/06/facebook_unethical_experiment_it_made_news_feeds_happier_or_sadder_to_manipulate.html")
                  .addArticleUrl("http://www.slate.com/articles/life/dear_prudence/2015/01/dear_prudence_i_want_to_stop_working_at_26.html")
                  .addArticleUrl("http://www.slate.com/articles/technology/technology/2015/01/snapchat_why_teens_favorite_app_makes_the_facebook_generation_feel_old.html")
                  .addArticleUrl("http://www.slate.com/blogs/business_insider/2014/10/17/google_launches_text_messaging_app_named_messenger_like_facebook_app.html")
                  .addArticleUrl("http://www.slate.com/blogs/future_tense/2015/02/13/wsj_report_apple_building_a_minivan_like_electric_car_to_rival_tesla.html")
                  .addArticleUrl("http://www.slate.com/blogs/the_slatest/2015/01/30/lindsey_graham_2016_south_carolina_senator_says_center_right_positions_make.html")
                  .addNonArticleUrl("http://www.slate.com/articles/news_and_politics/corrections.html")
                  .addNonArticleUrl("http://www.slate.com/authors.lv_anderson.slateplus.html")
                  .addNonArticleUrl("http://www.slate.com/authors.john_dickerson.html")
                  .addNonArticleUrl("http://www.slate.com/blogs/future_tense.html")
                  .addNonArticleUrl("http://www.slate.com/blogs/the_slatest.html"))
              .setUrlWhitelistChecks(UrlWhitelistChecks.newBuilder()
                  .addBadUrl("http://www.slate.com/articles/briefing/slate_fare/2011/12/commenting_on_slate_frequently_asked_questions.html")
                  .addBadUrl("http://www.slate.com/articles/news_and_politics/slate_fare/2006/08/about_us.html")
                  .addBadUrl("http://www.slate.com/articles/podcasts/working/2014/12/google_software_engineer_nina_kang_talks_about_the_differences_between_writing.html")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("startupworkout.com")
          .addStartUrl("http://startupworkout.com")
          .addParagraphSelector(".entry-content p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://startupworkout.com/inbox-hero-how-to-write-hypnotizing-emails-that-convert-like-crazy/1/")
                  .addArticleUrl("http://startupworkout.com/motivation-121-epic-business-quotes-to-inspire-your-success/")
                  .addArticleUrl("http://startupworkout.com/traction-list/")
                  .addArticleUrl("http://startupworkout.com/how-to-build-a-minimal-viable-product-that-works/")
                  .addArticleUrl("http://startupworkout.com/boring-to-billion/")
                  .addNonArticleUrl("http://startupworkout.com/")
                  .addNonArticleUrl("http://startupworkout.com/about/")
                  .addNonArticleUrl("http://startupworkout.com/recommended/")
                  .addNonArticleUrl("http://startupworkout.com/category/marketing/")
                  .addNonArticleUrl("http://startupworkout.com/page/2/")
                  .addNonArticleUrl("http://startupworkout.com/author/kevin-fleming/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("techcrunch.com")
          .addStartUrl("http://www.techcrunch.com")
          .addSubdomainBlacklist("disrupt.techcrunch.com")
          .addSubdomainBlacklist("jp.techcrunch.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/event-type/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/events/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/gallery/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/rss/"))
          .addParagraphSelector(".article-entry > p")
          .addParagraphSelector(".article-entry > h2")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://techcrunch.com/2006/10/31/2080/")
                  .addArticleUrl("http://techcrunch.com/2013/04/23/google-buys-wavii-for-north-of-30-million/")
                  .addArticleUrl("http://techcrunch.com/2014/01/07/yahoo-launches-news-digest-its-first-app-based-on-summly/")
                  .addArticleUrl("http://techcrunch.com/2014/03/25/best-y-combinator-demo-day-startups/")
                  .addArticleUrl("http://techcrunch.com/2014/05/28/apple-buys-beats-electronics-for-3b/")
                  .addArticleUrl("http://techcrunch.com/2014/09/09/announces-mobile-payments-solution-called-apple-pay/")
                  .addArticleUrl("http://techcrunch.com/2014/09/23/gobble-launch/")
                  .addArticleUrl("http://techcrunch.com/2014/12/30/what-the-hell-is-a-startup-anyway/")
                  .addArticleUrl("http://techcrunch.com/2015/01/20/microsoft-acquires-text-analysis-service-equivio/")
                  .addArticleUrl("http://techcrunch.com/2015/01/26/becoming-an-engineering-manager/")
                  .addArticleUrl("http://techcrunch.com/2015/01/26/favados-new-app-helps-you-find-the-best-grocery-deals/")
                  .addArticleUrl("http://techcrunch.com/2015/01/27/techstars-ventures-raises-150-million-as-it-expands-into-series-a-investments/")
                  .addArticleUrl("http://techcrunch.com/2015/01/29/google-glass-patrick-pichette/")
                  .addArticleUrl("http://techcrunch.com/2015/01/29/google-offering-24-hours-of-inbox-invites-on-the-day-of-outlooks-ios-launch/")
                  .addArticleUrl("http://techcrunch.com/2015/01/29/google-q4-2014-earnings/")
                  .addArticleUrl("http://techcrunch.com/2015/01/29/secret-co-founder-chrys-bader-wechseler-steps-down-because-its-not-about-design-anymore/")
                  .addArticleUrl("http://techcrunch.com/2015/01/29/teslas-p85d-will-get-even-faster-thanks-to-a-software-update/")
                  .addArticleUrl("http://techcrunch.com/2015/01/30/canon-5ds-leaked-specs-reveal-a-high-megapixel-dslr-geared-for-color-accuracy/")
                  .addArticleUrl("http://techcrunch.com/2015/01/30/gillmor-gang-live-01-30-15/")
                  .addArticleUrl("http://techcrunch.com/2015/01/30/uber-privacy-review/")
                  .addArticleUrl("http://techcrunch.com/2015/01/30/will-uber-convertibles-run-out-of-gas/")
                  .addArticleUrl("http://www.techcrunch.com/2008/11/03/old-friends-wink-and-reunioncom-reconnect-merge/")
                  .addNonArticleUrl("http://techcrunch.com/author/alexia-tsotsis/")
                  .addNonArticleUrl("http://techcrunch.com/entertainment-2/")
                  .addNonArticleUrl("http://techcrunch.com/topic/company/chatroulette/popular/")
                  .addNonArticleUrl("http://techcrunch.com/topic/product/android/")
                  .addNonArticleUrl("http://techcrunch.com/topic/product/apple-ios-8/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("technologyreview.com")
          .addStartUrl("http://www.technologyreview.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/careers/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/connect/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/downloads/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/emtech/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/events/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/getinsider/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/graphiti/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/lists/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/login/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/media/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/my/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/subscribe/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/summit/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/support/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/video/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/videos/"))
          .addParagraphSelector("section.body p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.technologyreview.com/news/535041/automating-the-data-scientists/")
                  .addArticleUrl("http://www.technologyreview.com/review/534581/the-purpose-of-silicon-valley/")
                  .addArticleUrl("http://www.technologyreview.com/view/533361/what-moocs-teach-us/")
                  .addArticleUrl("http://www.technologyreview.com/view/535176/human-face-recognition-found-in-neural-network-based-on-monkey-brains/")
                  .addArticleUrl("http://www.technologyreview.com/view/534411/what-obama-meant-by-converting-sunlight-into-liquid-fuel/")
                  .addNonArticleUrl("http://www.technologyreview.com/about/commenting-guidelines/")
                  .addNonArticleUrl("http://www.technologyreview.com/contributor/kevin-bullis/")
                  .addNonArticleUrl("http://www.technologyreview.com/purchase/businessreport/subscription/")
                  .addNonArticleUrl("http://www.technologyreview.com/tagged/samsung-1/")
                  .addNonArticleUrl("https://www.technologyreview.com/purchase/businessreport/subscription/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("telegraph.co.uk")
          .addStartUrl("http://www.telegraph.co.uk")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/apps/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/cars/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/culture/culturevideo/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/finance/investor/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/financialservices/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/promotions/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/subscriptions/"))
          .addSubdomainBlacklist("advertising.telegraph.co.uk")
          .addSubdomainBlacklist("announcements.telegraph.co.uk")
          .addSubdomainBlacklist("dating.telegraph.co.uk")
          .addSubdomainBlacklist("fantasyfootball.telegraph.co.uk")
          .addSubdomainBlacklist("gardenshop.telegraph.co.uk")
          .addSubdomainBlacklist("my.telegraph.co.uk")
          .addSubdomainBlacklist("puzzles.telegraph.co.uk")
          .addSubdomainBlacklist("shares.telegraph.co.uk")
          .addSubdomainBlacklist("shop.telegraph.co.uk")
          .addSubdomainBlacklist("travelshop.telegraph.co.uk")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/sponsored/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("Weather-forecast.html")
              .setLocation(Location.ENDS_WITH))
          .addParagraphSelector("article > p")
          .addParagraphSelector("article > div > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.telegraph.co.uk/finance/comment/11413173/Greek-drama-puts-eurozone-at-risk.html")
                  .addArticleUrl("http://www.telegraph.co.uk/finance/property/pictures/11355816/Beautiful-homes-in-Britains-national-parks-starting-at-300000.html")
                  .addArticleUrl("http://www.telegraph.co.uk/finance/businessclub/technology/11410369/Professional-gamers-could-earn-as-much-as-Premier-League-stars.html")
                  .addArticleUrl("http://www.telegraph.co.uk/news/religion/11412153/Locating-Lucifer-has-become-the-devil-of-a-job.html")
                  .addArticleUrl("http://www.telegraph.co.uk/women/womens-life/11393482/AntiSelfieDay-Rediscover-your-personality-this-Valentines-Day.html")
                  .addArticleUrl("http://www.telegraph.co.uk/culture/film/filmreviews/11404791/Fifty-Shades-of-Grey-review.html")
                  .addNonArticleUrl("http://www.telegraph.co.uk/archive/2015-2-15.html")
                  .addNonArticleUrl("http://www.telegraph.co.uk/culture/tvandradio/broadchurch/")
                  .addNonArticleUrl("http://www.telegraph.co.uk/journalists/charles-spencer/")
                  .addNonArticleUrl("http://www.telegraph.co.uk/technology/video-games/")
                  .addNonArticleUrl("http://www.telegraph.co.uk/topics/about-us/style-book/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("theguardian.com")
          .addStartUrl("http://www.theguardian.com")
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/gallery/")
              .setLocation(Location.CONTAINS))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/live/")
              .setLocation(Location.CONTAINS))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/match/") // Sports match coverage.
              .setLocation(Location.CONTAINS))
          .addSubdomainBlacklist("discussion.theguardian.com")
          .addSubdomainBlacklist("id.theguardian.com")
          .addSubdomainBlacklist("jobs.theguardian.com")
          .addSubdomainBlacklist("profile.theguardian.com")
          .addSubdomainBlacklist("subscribe.theguardian.com")
          .addParagraphSelector("article > p")
          .addParagraphSelector("article > div > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.theguardian.com/business/blog/2015/feb/11/has-an-accidental-currency-war-erupted")
                  .addArticleUrl("http://www.theguardian.com/football/2015/feb/14/crystal-palace-liverpool-fa-cup-match-report")
                  .addArticleUrl("http://www.theguardian.com/money/2015/feb/12/home-repossession-lowest-since-2006")
                  .addArticleUrl("http://www.theguardian.com/music/2015/feb/15/bjork-delta-archives-alex-ross")
                  .addArticleUrl("http://www.theguardian.com/technology/2014/dec/22/the-best-android-apps-of-2014")
                  .addNonArticleUrl("http://www.theguardian.com/business/series/project-syndicate-economists")
                  .addNonArticleUrl("http://www.theguardian.com/business/series/us-small-business")
                  .addNonArticleUrl("http://www.theguardian.com/environment/series/weekinwildlife")
                  .addNonArticleUrl("http://www.theguardian.com/film/aacta-awards-2015")
                  .addNonArticleUrl("http://www.theguardian.com/profile/jim-o-neill")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("thenextweb.com")
          .addStartUrl("http://thenextweb.com")
          .addSubdomainBlacklist("deals.thenextweb.com")
          .addSubdomainBlacklist("goodies.thenextweb.com")
          .addSubdomainBlacklist("inside.thenextweb.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/advertise/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/conference/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/pro")
              .setLocation(Location.EQUALS))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/tech5/"))
          .addParagraphSelector(".entry-content p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://thenextweb.com/lifehacks/2015/02/14/modern-mentor-guide-courting-influencers/")
                  .addArticleUrl("http://thenextweb.com/creativity/2015/02/14/genius-timehops-valentines-day-warning-screen/")
                  .addArticleUrl("http://thenextweb.com/socialmedia/2015/02/14/complete-beginners-guide-social-media-benchmarks/")
                  .addArticleUrl("http://thenextweb.com/twitter/2015/02/13/twitters-mobile-apps-experiencing-delayed-notification-bug/")
                  .addArticleUrl("http://thenextweb.com/2009/02/14/microsoft-open-retail-stores/")
                  .addNonArticleUrl("http://thenextweb.com/about/")
                  .addNonArticleUrl("http://thenextweb.com/about/contact")
                  .addNonArticleUrl("http://thenextweb.com/about/team")
                  .addNonArticleUrl("http://thenextweb.com/author/jeremeydv/")
                  .addNonArticleUrl("http://thenextweb.com/twitter/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("theverge.com")
          .addStartUrl("http://www.theverge.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/forums/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/jobs"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/search"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/video/"))
          .addParagraphSelector("article p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.theverge.com/2014/10/15/6982167/google-android-5-0-l-lollipop-announcement-release")
                  .addArticleUrl("http://www.theverge.com/2014/2/7/5389668/bitcoin-exchange-mt-gox-halts-withdrawals-maintenance")
                  .addArticleUrl("http://www.theverge.com/2015/1/15/7551569/harmony-api-use-case")
                  .addArticleUrl("http://www.theverge.com/2015/1/21/7861645/finfisher-spyware-let-bahrain-government-hack-political-activist")
                  .addArticleUrl("http://www.theverge.com/2015/1/23/7876777/sonos-sound-wave-logo")
                  .addArticleUrl("http://www.theverge.com/2015/1/30/7948619/before-uber-revolutionizes-labor-its-going-to-have-to-explain-these")
                  .addArticleUrl("http://www.theverge.com/2015/1/30/7952941/at-t-largest-bidder-fcc-aws-3-wireless-spectrum-auction")
                  .addArticleUrl("http://www.theverge.com/2015/1/9/7522021/phonebloks-block-modular-smartwatch-ces-2015")
                  .addArticleUrl("http://www.theverge.com/tldr/2015/1/9/7521373/ces-2015-living-in-LVCC")
                  .addNonArticleUrl("http://www.theverge.com/design")
                  .addNonArticleUrl("http://www.theverge.com/about-the-verge")
                  .addNonArticleUrl("http://www.theverge.com/label/features")
                  .addNonArticleUrl("http://www.theverge.com/users/K.Ananse")
                  .addNonArticleUrl("http://www.theverge.com/rss/index.xml")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("venturebeat.com")
          .addStartUrl("http://venturebeat.com")
          .addSubdomainBlacklist("events.venturebeat.com")
          .addSubdomainBlacklist("insight.venturebeat.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/jobs/"))
          .addParagraphSelector(".post-content > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://venturebeat.com/2015/01/29/googles-eric-schmidt-has-a-10-year-prediction-of-how-tech-will-disrupt-whole-industries/")
                  .addArticleUrl("http://venturebeat.com/2015/01/30/google-ventures-releases-new-diy-guide-to-help-startups-design-better-products/")
                  .addArticleUrl("http://venturebeat.com/2015/01/30/here-are-the-predictions-for-who-will-win-the-super-bowl-of-ads/")
                  .addArticleUrl("http://venturebeat.com/2015/01/30/new-apple-and-ibm-enterprise-app-delivers-a-lot-of-utility/")
                  .addArticleUrl("http://venturebeat.com/2015/01/30/tencent-grabs-the-digital-rights-to-nba-basketball-in-china/")
                  .addArticleUrl("http://venturebeat.com/2015/02/14/a-new-app-called-sparkstarter-offers-a-fresh-twist-on-online-dating-matchmaking/")
                  .addNonArticleUrl("http://venturebeat.com/tag/android/")
                  .addNonArticleUrl("http://venturebeat.com/contact/")
                  .addNonArticleUrl("http://venturebeat.com/advertise/")
                  .addNonArticleUrl("http://venturebeat.com/category/small-biz/")
                  .addNonArticleUrl("http://venturebeat.com/sign-up/")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("washingtonpost.com")
          .addStartUrl("http://www.washingtonpost.com")
          .addSubdomainBlacklist("account.washingtonpost.com")
          .addSubdomainBlacklist("advertising.washingtonpost.com")
          .addSubdomainBlacklist("apps.washingtonpost.com")
          .addSubdomainBlacklist("feeds.washingtonpost.com")
          .addSubdomainBlacklist("findnsave.washingtonpost.com")
          .addSubdomainBlacklist("games.washingtonpost.com")
          .addSubdomainBlacklist("js.washingtonpost.com")
          .addSubdomainBlacklist("m.washingtonpost.com")
          .addSubdomainBlacklist("nie.washingtonpost.com")
          .addSubdomainBlacklist("realestate.washingtonpost.com")
          .addSubdomainBlacklist("stats.washingtonpost.com")
          .addSubdomainBlacklist("syndication.washingtonpost.com")
          .addSubdomainBlacklist("ssl.washingtonpost.com")
          .addSubdomainBlacklist("subscribe.washingtonpost.com")
          .addSubdomainBlacklist("yellowpages.washingtonpost.com")
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/capitalweathergang/"))
          .addPathBlacklist(PathBlacklist.newBuilder().setNeedle("/newssearch/"))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/wp-dyn/")
              .setLocation(Location.CONTAINS))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/wp-srv/")
              .setLocation(Location.CONTAINS))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/wp-dyn")
              .setLocation(Location.ENDS_WITH))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("_category.html")
              .setLocation(Location.ENDS_WITH))
          .addPathBlacklist(PathBlacklist.newBuilder()
              .setNeedle("/post.php")
              .setLocation(Location.ENDS_WITH))
          .addParagraphSelector(".row p")
          .addParagraphSelector("article > p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://blog.washingtonpost.com/fact-checker/2007/09/about_the_fact_checker.html")
                  .addArticleUrl("http://knowmore.washingtonpost.com/2014/05/08/hardly-anyone-walks-to-work-especially-not-in-the-south/")
                  .addArticleUrl("http://live.washingtonpost.com/ask-boswell-20141229.html")
                  .addArticleUrl("http://voices.washingtonpost.com/rawfisher/2007/07/butch_is_back_a_jazz_legend_re.html")
                  .addArticleUrl("http://www.washingtonpost.com/blogs/the-switch/wp/2013/12/23/heres-what-paul-krugman-doesnt-get-about-bitcoin/")
                  .addArticleUrl("http://www.washingtonpost.com/news/morning-mix/wp/2014/12/16/hong-kongs-occupy-central-protest-is-no-more/")
                  .addArticleUrl("http://www.washingtonpost.com/politics/house-majority-whip-scalise-confirms-he-spoke-to-white-nationalists-in-2002/2014/12/29/7f80dc14-8fa3-11e4-a900-9960214d4cd7_story.html")
                  .addArticleUrl("http://www.washingtonpost.com/sports/highschools/prosecutors-allege-that-dc-assault-co-founder-curtis-malone-is-principle-character-in-wide-ranging-drug-conspiracy/2013/10/09/ff92d324-30f6-11e3-8627-c5d7de0a046b_story.html")
                  .addArticleUrl("http://www.washingtonpost.com/world/asia_pacific/air-search-for-missing-airasia-jet-suspended/2014/12/28/a903067e-8e8c-11e4-a900-9960214d4cd7_story.html")
                  .addArticleUrl("http://www.washingtonpost.com/world/russias-putin-prepares-to-annex-crimea/2014/03/18/933183b2-654e-45ce-920e-4d18c0ffec73_story.html")
                  .addNonArticleUrl("http://knowmore.washingtonpost.com")
                  .addNonArticleUrl("http://primary.washingtonpost.com/blogs/right-turn/")
                  .addNonArticleUrl("http://projects.washingtonpost.com/2008-presidential-candidates/")
                  .addNonArticleUrl("http://voices.washingtonpost.com/politics/campaigns.html")
                  .addNonArticleUrl("http://washingtonpost.com/pb/philip-bump")
                  .addNonArticleUrl("http://www.washingtonpost.com/")
                  .addNonArticleUrl("http://www.washingtonpost.com/2011/05/23/AFPeNbAH_page.html")
                  .addNonArticleUrl("http://www.washingtonpost.com/blogs/capital-weather-gang/about-and-faq/")
                  .addNonArticleUrl("http://www.washingtonpost.com/blogs/capital-weather-gang/page/2/")
                  .addNonArticleUrl("http://www.washingtonpost.com/niraj-chokshi/2014/06/10/6b40abf2-f0cb-11e3-9ebc-2ee6f81ed217_page.html")))
          .build())
      .addContentSite(ContentSite.newBuilder()
          .setRootDomain("wired.com")
          .addStartUrl("http://www.wired.com")
          .addSubdomainBlacklist("jobs.wired.com")
          .addParagraphSelector("span[itemprop=\"articleBody\"] div")
          .addParagraphSelector("span[itemprop=\"articleBody\"] p")
          .setTestInstructions(TestInstructions.newBuilder()
              .setArticleUrlDetectorChecks(ArticleUrlDetectorChecks.newBuilder()
                  .addArticleUrl("http://www.wired.com/2014/12/indispensable-vehicles-got-start-wwi/")
                  .addArticleUrl("http://www.wired.com/2015/01/absurd-creature-of-the-week-barbados-threadsnake/")
                  .addArticleUrl("http://www.wired.com/2015/01/daniel-gebhart-de-koekkoek-bodybuilders/")
                  .addArticleUrl("http://www.wired.com/2015/01/facebook-making-news-feed-better-asking-real-people-direct-questions/")
                  .addArticleUrl("http://www.wired.com/2015/01/game-of-thrones-season-5-trailer/")
                  .addArticleUrl("http://www.wired.com/2015/01/new-3ds-zelda-majoras-mask/")
                  .addArticleUrl("http://www.wired.com/2015/01/nissan-juke-tracks-snow/")
                  .addArticleUrl("http://www.wired.com/2015/01/smartest-richest-companies-cant-crack-mobile-future-belongs-anyone-can/")
                  .addArticleUrl("http://www.wired.com/2015/01/tech-time-warp-pizza/")
                  .addArticleUrl("http://www.wired.com/2015/01/think-students-allowed-cheat/")
                  .addArticleUrl("http://www.wired.com/2015/01/verizon-will-let-customers-sidestep-privacy-killing-perma-cookie/")
                  .addArticleUrl("http://www.wired.com/2015/02/get-silicon-valleys-unvaccinated-change-minds/")
                  .addNonArticleUrl("http://www.wired.com/category/beyondapollo/")
                  .addNonArticleUrl("http://www.wired.com/about/rss_feeds/")
                  .addNonArticleUrl("http://www.wired.com/about/staff_publishing/")
                  .addNonArticleUrl("http://www.wired.com/services/newsletters/demographics/")
                  .addNonArticleUrl("http://www.wired.com/category/science-blogs/")))
          .build())
      .build();

  private static final Logger LOG = new Logger(UrlWhitelist.class);

  public static ContentSite getContentSiteForUrl(URL url) {
    String domain = url.getHost();
    while (domain.contains(".")) {
      for (ContentSite contentSite : CRAWL_INSTRUCTIONS.getContentSiteList()) {
        if (contentSite.getRootDomain().equals(domain)
            || Iterables.contains(contentSite.getAkaRootDomainList(), domain)) {
          return contentSite;
        }
      }
      domain = domain.substring(domain.indexOf(".") + 1);
    }
    return null;
  }

  public static boolean isOkay(String urlString) {
    try {
      URL url = new URL(urlString);

      // Length exclusion (this is the longest a URL can be in our database).
      if (urlString.length() > 767) {
        return false;
      }

      ContentSite contentSite = getContentSiteForUrl(url);
      if (contentSite == null) {
        return false;
      }
      String domain = url.getHost();
      for (String blacklistedDomain : contentSite.getSubdomainBlacklistList()) {
        if (domain.equals(blacklistedDomain)) {
          return false;
        }
      }
      String path = url.getPath();
      for (PathBlacklist blacklistedPath : contentSite.getPathBlacklistList()) {
        switch (blacklistedPath.getLocation()) {
          case EQUALS:
            if (path.equals(blacklistedPath.getNeedle())) {
              return false;
            }
            break;

          case STARTS_WITH:
            if (path.startsWith(blacklistedPath.getNeedle())) {
              return false;
            }
            break;

          case ENDS_WITH:
            if (path.endsWith(blacklistedPath.getNeedle())) {
              return false;
            }
            break;

          case CONTAINS:
            if (path.contains(blacklistedPath.getNeedle())) {
              return false;
            }
            break;

          case REGEX_FIND:
            if (Pattern.compile(blacklistedPath.getNeedle()).matcher(path).find()) {
              return false;
            }
            break;

          case REGEX_MATCH:
            if (Pattern.compile(blacklistedPath.getNeedle()).matcher(path).matches()) {
              return false;
            }
            break;
        }
      }

      // Global path exclusions.
      if (domain.contains("video.") ||
          domain.contains("videos.") ||
          path.startsWith("/cgi-bin/") ||
          path.contains("/video/") ||
          path.contains("/videos/")) {
        return false;
      }

      // Global extension exclusions.
      if (path.endsWith("/atom.xml") ||
          path.endsWith("/rss.xml") ||
          path.endsWith(".gif") ||
          path.endsWith(".jpeg") ||
          path.endsWith(".jpg") ||
          path.endsWith(".mp3") ||
          path.endsWith(".mp4") ||
          path.endsWith(".mpeg") ||
          path.endsWith(".pdf") ||
          path.endsWith(".png")) {
        return false;
      }

      // Everything passed!
      return true;

    } catch (MalformedURLException e) {
      return false;
    }
  }

  /**
   * Cleans up the database by deleting any URLs and related metadata (crawl
   * data, links, etc) for articles that are now blacklisted or whose query
   * parameters are now more restrictive.
   * NOTE(jonemerson): We delete URLs with now-obsolete query parameters,
   * rather than update them, because it's generally difficult to canonicalize
   * two URLs and we can always find the cleaned URL again later, if necessary.
   */
  public static void main(String args[]) throws Exception {
    Map<String, String> urlsToDelete = Maps.newHashMap();
    for (Url url : Database.with(Url.class).get(
        new QueryOption.WhereNotLike("url", "%//twitter.com/%"))) {
      String urlStr = url.getUrl();
      if ((!isOkay(urlStr) || !urlStr.equals(UrlCleaner.clean(urlStr)))) {
        urlsToDelete.put(urlStr, url.getId());
      }
      if (urlsToDelete.size() == 100 || url == null) {
        deleteUrlMap(urlsToDelete);
        urlsToDelete.clear();
      }
    }
    deleteUrlMap(urlsToDelete);
  }

  private static void deleteUrlMap(Map<String, String> urlsToDelete) throws DatabaseSchemaException {
    List<String> ids = Lists.newArrayList();
    for (Map.Entry<String, String> urlToDelete : urlsToDelete.entrySet()) {
      LOG.info("Deleting url: " + urlToDelete.getKey());
      ids.add(urlToDelete.getValue());
    }
    LOG.info("Deleted " + Database.with(Article.class).delete(ids) + " articles");
    LOG.info("Deleted " + Links.deleteIds(ids) + " links");
    LOG.info("Deleted " + Database.with(Url.class).delete(ids) + " urls");
  }
}
